<html lang="en">
<head>
<title>Particular Headers - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Header-Files.html#Header-Files" title="Header Files">
<link rel="prev" href="Header-Portability.html#Header-Portability" title="Header Portability">
<link rel="next" href="Generic-Headers.html#Generic-Headers" title="Generic Headers">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Particular-Headers"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Generic-Headers.html#Generic-Headers">Generic Headers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Header-Portability.html#Header-Portability">Header Portability</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Header-Files.html#Header-Files">Header Files</a>
<hr>
</div>

<h4 class="subsection">5.6.2 Particular Header Checks</h4>

<p>These macros check for particular system header files&mdash;whether they
exist, and in some cases whether they declare certain symbols.

<div class="defun">
&mdash; Macro: <b>AC_CHECK_HEADER_STDBOOL</b><var><a name="index-AC_005fCHECK_005fHEADER_005fSTDBOOL-597"></a></var><br>
<blockquote><p><a name="index-AC_005fCHECK_005fHEADER_005fSTDBOOL-598"></a>
<a name="index-HAVE_005f_005fBOOL-599"></a><a name="index-g_t_0040file_007bstdbool_002eh_007d-600"></a>
<a name="index-ac_005fcv_005fheader_005fstdbool_005fh-601"></a>
Check whether <samp><span class="file">stdbool.h</span></samp> exists and conforms to C99, and cache the
result in the <code>ac_cv_header_stdbool_h</code> variable.  If the type
<code>_Bool</code> is defined, define <code>HAVE__BOOL</code> to 1.

        <p>This macro is intended for use by Gnulib (see <a href="Gnulib.html#Gnulib">Gnulib</a>) and other
packages that supply a substitute <samp><span class="file">stdbool.h</span></samp> on platforms lacking
a conforming one.  The <code>AC_HEADER_STDBOOL</code> macro is better for code
that explicitly checks for <samp><span class="file">stdbool.h</span></samp>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_ASSERT</b><var><a name="index-AC_005fHEADER_005fASSERT-602"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fASSERT-603"></a>
<a name="index-NDEBUG-604"></a><a name="index-g_t_0040file_007bassert_002eh_007d-605"></a>
Check whether to enable assertions in the style of <samp><span class="file">assert.h</span></samp>. 
Assertions are enabled by default, but the user can override this by
invoking <samp><span class="command">configure</span></samp> with the <samp><span class="option">--disable-assert</span></samp> option. 
</p></blockquote></div>

   <p><a name="AC_005fHEADER_005fDIRENT"></a>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_DIRENT</b><var><a name="index-AC_005fHEADER_005fDIRENT-606"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fDIRENT-607"></a>
<a name="index-HAVE_005fDIRENT_005fH-608"></a><a name="index-HAVE_005fNDIR_005fH-609"></a><a name="index-HAVE_005fSYS_005fDIR_005fH-610"></a><a name="index-HAVE_005fSYS_005fNDIR_005fH-611"></a><a name="index-g_t_0040file_007bdirent_002eh_007d-612"></a>
<a name="index-g_t_0040file_007bsys_002fndir_002eh_007d-613"></a>
<a name="index-g_t_0040file_007bsys_002fdir_002eh_007d-614"></a>
<a name="index-g_t_0040file_007bndir_002eh_007d-615"></a>
Check for the following header files.  For the first one that is
found and defines &lsquo;<samp><span class="samp">DIR</span></samp>&rsquo;, define the listed C preprocessor macro:

        <p><table summary=""><tr align="left"><td valign="top"><samp><span class="file">dirent.h</span></samp>   </td><td valign="top"><code>HAVE_DIRENT_H</code>
<br></td></tr><tr align="left"><td valign="top"><samp><span class="file">sys/ndir.h</span></samp> </td><td valign="top"><code>HAVE_SYS_NDIR_H</code>
<br></td></tr><tr align="left"><td valign="top"><samp><span class="file">sys/dir.h</span></samp>  </td><td valign="top"><code>HAVE_SYS_DIR_H</code>
<br></td></tr><tr align="left"><td valign="top"><samp><span class="file">ndir.h</span></samp>     </td><td valign="top"><code>HAVE_NDIR_H</code>
        <br></td></tr></table>

        <p>The directory-library declarations in your source code should look
something like the following:

     <pre class="example">          #include &lt;sys/types.h&gt;
          #ifdef HAVE_DIRENT_H
          # include &lt;dirent.h&gt;
          # define NAMLEN(dirent) strlen ((dirent)-&gt;d_name)
          #else
          # define dirent direct
          # define NAMLEN(dirent) ((dirent)-&gt;d_namlen)
          # ifdef HAVE_SYS_NDIR_H
          #  include &lt;sys/ndir.h&gt;
          # endif
          # ifdef HAVE_SYS_DIR_H
          #  include &lt;sys/dir.h&gt;
          # endif
          # ifdef HAVE_NDIR_H
          #  include &lt;ndir.h&gt;
          # endif
          #endif
</pre>
        <p>Using the above declarations, the program would declare variables to be
of type <code>struct dirent</code>, not <code>struct direct</code>, and would access
the length of a directory entry name by passing a pointer to a
<code>struct dirent</code> to the <code>NAMLEN</code> macro.

        <p>This macro also checks for the SCO Xenix <samp><span class="file">dir</span></samp> and <samp><span class="file">x</span></samp> libraries.

        <p>This macro is obsolescent, as all current systems with directory
libraries have <code>&lt;dirent.h&gt;</code>.  New programs need not use this macro.

        <p>Also see <code>AC_STRUCT_DIRENT_D_INO</code> and
<code>AC_STRUCT_DIRENT_D_TYPE</code> (see <a href="Particular-Structures.html#Particular-Structures">Particular Structures</a>). 
</p></blockquote></div>

   <p><a name="AC_005fHEADER_005fMAJOR"></a>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_MAJOR</b><var><a name="index-AC_005fHEADER_005fMAJOR-616"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fMAJOR-617"></a>
<a name="index-MAJOR_005fIN_005fMKDEV-618"></a><a name="index-MAJOR_005fIN_005fSYSMACROS-619"></a><a name="index-g_t_0040file_007bsys_002fmkdev_002eh_007d-620"></a>
<a name="index-g_t_0040file_007bsys_002fsysmacros_002eh_007d-621"></a>
If <samp><span class="file">sys/types.h</span></samp> does not define <code>major</code>, <code>minor</code>, and
<code>makedev</code>, but <samp><span class="file">sys/mkdev.h</span></samp> does, define
<code>MAJOR_IN_MKDEV</code>; otherwise, if <samp><span class="file">sys/sysmacros.h</span></samp> does, define
<code>MAJOR_IN_SYSMACROS</code>. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_RESOLV</b><var><a name="index-AC_005fHEADER_005fRESOLV-622"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fRESOLV-623"></a>
<a name="index-HAVE_005fRESOLV_005fH-624"></a><a name="index-g_t_0040file_007bresolv_002eh_007d-625"></a>
Checks for header <samp><span class="file">resolv.h</span></samp>, checking for prerequisites first. 
To properly use <samp><span class="file">resolv.h</span></samp>, your code should contain something like
the following:

     <pre class="verbatim">     #ifdef HAVE_SYS_TYPES_H
     #  include &lt;sys/types.h>
     #endif
     #ifdef HAVE_NETINET_IN_H
     #  include &lt;netinet/in.h>   /* inet_ functions / structs */
     #endif
     #ifdef HAVE_ARPA_NAMESER_H
     #  include &lt;arpa/nameser.h> /* DNS HEADER struct */
     #endif
     #ifdef HAVE_NETDB_H
     #  include &lt;netdb.h>
     #endif
     #include &lt;resolv.h>
</pre>
</p></blockquote></div>

   <p><a name="AC_005fHEADER_005fSTAT"></a>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_STAT</b><var><a name="index-AC_005fHEADER_005fSTAT-626"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fSTAT-627"></a>
<a name="index-STAT_005fMACROS_005fBROKEN-628"></a><a name="index-g_t_0040file_007bsys_002fstat_002eh_007d-629"></a>
If the macros <code>S_ISDIR</code>, <code>S_ISREG</code>, etc. defined in
<samp><span class="file">sys/stat.h</span></samp> do not work properly (returning false positives),
define <code>STAT_MACROS_BROKEN</code>.  This is the case on Tektronix UTekV,
Amdahl UTS and Motorola System V/88.

        <p>This macro is obsolescent, as no current systems have the bug. 
New programs need not use this macro. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_STDBOOL</b><var><a name="index-AC_005fHEADER_005fSTDBOOL-630"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fSTDBOOL-631"></a>
<a name="index-HAVE_005fSTDBOOL_005fH-632"></a><a name="index-HAVE_005f_005fBOOL-633"></a><a name="index-g_t_0040file_007bstdbool_002eh_007d-634"></a>
<a name="index-ac_005fcv_005fheader_005fstdbool_005fh-635"></a>
If <samp><span class="file">stdbool.h</span></samp> exists and conforms to C99, define
<code>HAVE_STDBOOL_H</code> to 1; if the type <code>_Bool</code> is defined, define
<code>HAVE__BOOL</code> to 1.  To fulfill the C99 requirements, your
program could contain the following code:

     <pre class="example">          #ifdef HAVE_STDBOOL_H
          # include &lt;stdbool.h&gt;
          #else
          # ifndef HAVE__BOOL
          #  ifdef __cplusplus
          typedef bool _Bool;
          #  else
          #   define _Bool signed char
          #  endif
          # endif
          # define bool _Bool
          # define false 0
          # define true 1
          # define __bool_true_false_are_defined 1
          #endif
</pre>
        <p>Alternatively you can use the &lsquo;<samp><span class="samp">stdbool</span></samp>&rsquo; package of Gnulib
(see <a href="Gnulib.html#Gnulib">Gnulib</a>).  It simplifies your code so that it can say just
<code>#include &lt;stdbool.h&gt;</code>, and it adds support for less-common
platforms.

        <p>This macro caches its result in the <code>ac_cv_header_stdbool_h</code>
variable.

        <p>This macro differs from <code>AC_CHECK_HEADER_STDBOOL</code> only in that it
defines <code>HAVE_STDBOOL_H</code> whereas <code>AC_CHECK_HEADER_STDBOOL</code>
does not. 
</p></blockquote></div>

   <p><a name="AC_005fHEADER_005fSTDC"></a>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_STDC</b><var><a name="index-AC_005fHEADER_005fSTDC-636"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fSTDC-637"></a>
<a name="index-STDC_005fHEADERS-638"></a><a name="index-g_t_0040file_007bstdlib_002eh_007d-639"></a>
<a name="index-g_t_0040file_007bstdarg_002eh_007d-640"></a>
<a name="index-g_t_0040file_007bstring_002eh_007d-641"></a>
<a name="index-g_t_0040file_007bfloat_002eh_007d-642"></a>
<a name="index-g_t_0040file_007bctype_002eh_007d-643"></a>
<a name="index-ac_005fcv_005fheader_005fstdc-644"></a>
Define <code>STDC_HEADERS</code> if the system has C header files
conforming to ANSI C89 (ISO C90). 
Specifically, this macro checks for <samp><span class="file">stdlib.h</span></samp>, <samp><span class="file">stdarg.h</span></samp>,
<samp><span class="file">string.h</span></samp>, and <samp><span class="file">float.h</span></samp>; if the system has those, it
probably has the rest of the C89 header files.  This macro also
checks whether <samp><span class="file">string.h</span></samp> declares <code>memchr</code> (and thus
presumably the other <code>mem</code> functions), whether <samp><span class="file">stdlib.h</span></samp>
declare <code>free</code> (and thus presumably <code>malloc</code> and other related
functions), and whether the <samp><span class="file">ctype.h</span></samp> macros work on characters
with the high bit set, as the C standard requires.

        <p>If you use this macro, your code can refer to <code>STDC_HEADERS</code> to
determine whether the system has conforming header files (and probably C
library functions).

        <p>This macro caches its result in the <code>ac_cv_header_stdc</code> variable.

        <p>This macro is obsolescent, as current systems have conforming header
files.  New programs need not use this macro.

        <p><a name="index-g_t_0040file_007bstring_002eh_007d-645"></a>
<a name="index-g_t_0040file_007bstrings_002eh_007d-646"></a>
Nowadays <samp><span class="file">string.h</span></samp> is part of the C standard and declares functions like
<code>strcpy</code>, and <samp><span class="file">strings.h</span></samp> is standardized by Posix and declares
BSD functions like <code>bcopy</code>; but
historically, string functions were a major sticking point in this area. 
If you still want to worry about portability to ancient systems without
standard headers, there is so much variation
that it is probably easier to declare the functions you use than to
figure out exactly what the system header files declare.  Some ancient systems
contained a mix of functions from the C standard and from BSD;
some were mostly standard but lacked &lsquo;<samp><span class="samp">memmove</span></samp>&rsquo;; some defined the
BSD functions as macros in <samp><span class="file">string.h</span></samp> or
<samp><span class="file">strings.h</span></samp>; some had only the BSD functions but
<samp><span class="file">string.h</span></samp>; some declared the memory functions in <samp><span class="file">memory.h</span></samp>,
some in <samp><span class="file">string.h</span></samp>; etc.  It is probably sufficient to check for
one string function and one memory function; if the library had the
standard versions of those then it probably had most of the others. 
If you put the following in <samp><span class="file">configure.ac</span></samp>:

     <pre class="example">          # This example is obsolescent.
          # Nowadays you can omit these macro calls.
          AC_HEADER_STDC
          AC_CHECK_FUNCS([strchr memcpy])
</pre>
        <p class="noindent">then, in your code, you can use declarations like this:

     <pre class="example">          /* This example is obsolescent.
             Nowadays you can just #include &lt;string.h&gt;.  */
          #ifdef STDC_HEADERS
          # include &lt;string.h&gt;
          #else
          # ifndef HAVE_STRCHR
          #  define strchr index
          #  define strrchr rindex
          # endif
          char *strchr (), *strrchr ();
          # ifndef HAVE_MEMCPY
          #  define memcpy(d, s, n) bcopy ((s), (d), (n))
          #  define memmove(d, s, n) bcopy ((s), (d), (n))
          # endif
          #endif
</pre>
        <p class="noindent">If you use a function like <code>memchr</code>, <code>memset</code>, <code>strtok</code>,
or <code>strspn</code>, which have no BSD equivalent, then macros don't
suffice to port to ancient hosts; you must provide an implementation of
each function.  An easy
way to incorporate your implementations only when needed (since the ones
in system C libraries may be hand optimized) is to, taking <code>memchr</code>
for example, put it in <samp><span class="file">memchr.c</span></samp> and use
&lsquo;<samp><span class="samp">AC_REPLACE_FUNCS([memchr])</span></samp>&rsquo;. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_SYS_WAIT</b><var><a name="index-AC_005fHEADER_005fSYS_005fWAIT-647"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fSYS_005fWAIT-648"></a>
<a name="index-HAVE_005fSYS_005fWAIT_005fH-649"></a><a name="index-g_t_0040file_007bsys_002fwait_002eh_007d-650"></a>
<a name="index-ac_005fcv_005fheader_005fsys_005fwait_005fh-651"></a>
If <samp><span class="file">sys/wait.h</span></samp> exists and is compatible with Posix, define
<code>HAVE_SYS_WAIT_H</code>.  Incompatibility can occur if <samp><span class="file">sys/wait.h</span></samp>
does not exist, or if it uses the old BSD <code>union wait</code> instead
of <code>int</code> to store a status value.  If <samp><span class="file">sys/wait.h</span></samp> is not
Posix compatible, then instead of including it, define the
Posix macros with their usual interpretations.  Here is an
example:

     <pre class="example">          #include &lt;sys/types.h&gt;
          #ifdef HAVE_SYS_WAIT_H
          # include &lt;sys/wait.h&gt;
          #endif
          #ifndef WEXITSTATUS
          # define WEXITSTATUS(stat_val) ((unsigned int) (stat_val) &gt;&gt; 8)
          #endif
          #ifndef WIFEXITED
          # define WIFEXITED(stat_val) (((stat_val) &amp; 255) == 0)
          #endif
</pre>
        <p class="noindent">This macro caches its result in the <code>ac_cv_header_sys_wait_h</code>
variable.

        <p>This macro is obsolescent, as current systems are compatible with Posix. 
New programs need not use this macro. 
</p></blockquote></div>

   <p><a name="index-g_t_005fPOSIX_005fVERSION-652"></a><a name="index-g_t_0040file_007bunistd_002eh_007d-653"></a>
<code>_POSIX_VERSION</code> is defined when <samp><span class="file">unistd.h</span></samp> is included on
Posix systems.  If there is no <samp><span class="file">unistd.h</span></samp>, it is definitely
not a Posix system.  However, some non-Posix systems do
have <samp><span class="file">unistd.h</span></samp>.

   <p>The way to check whether the system supports Posix is:

<pre class="example">     #ifdef HAVE_UNISTD_H
     # include &lt;sys/types.h&gt;
     # include &lt;unistd.h&gt;
     #endif
     
     #ifdef _POSIX_VERSION
     /* Code for Posix systems.  */
     #endif
</pre>
   <p><a name="AC_005fHEADER_005fTIME"></a>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_TIME</b><var><a name="index-AC_005fHEADER_005fTIME-654"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fTIME-655"></a>
<a name="index-TIME_005fWITH_005fSYS_005fTIME-656"></a><a name="index-g_t_0040file_007btime_002eh_007d-657"></a>
<a name="index-g_t_0040file_007bsys_002ftime_002eh_007d-658"></a>
<a name="index-ac_005fcv_005fheader_005ftime-659"></a>
If a program may include both <samp><span class="file">time.h</span></samp> and <samp><span class="file">sys/time.h</span></samp>,
define <code>TIME_WITH_SYS_TIME</code>.  On some ancient systems,
<samp><span class="file">sys/time.h</span></samp> included <samp><span class="file">time.h</span></samp>, but <samp><span class="file">time.h</span></samp> was not
protected against multiple inclusion, so programs could not explicitly
include both files.  This macro is useful in programs that use, for
example, <code>struct timeval</code> as well as
<code>struct tm</code>.  It is best used in conjunction with
<code>HAVE_SYS_TIME_H</code>, which can be checked for using
<code>AC_CHECK_HEADERS([sys/time.h])</code>.

     <pre class="example">          #ifdef TIME_WITH_SYS_TIME
          # include &lt;sys/time.h&gt;
          # include &lt;time.h&gt;
          #else
          # ifdef HAVE_SYS_TIME_H
          #  include &lt;sys/time.h&gt;
          # else
          #  include &lt;time.h&gt;
          # endif
          #endif
</pre>
        <p class="noindent">This macro caches its result in the <code>ac_cv_header_time</code> variable.

        <p>This macro is obsolescent, as current systems can include both files
when they exist.  New programs need not use this macro. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_HEADER_TIOCGWINSZ</b><var><a name="index-AC_005fHEADER_005fTIOCGWINSZ-660"></a></var><br>
<blockquote><p><a name="index-AC_005fHEADER_005fTIOCGWINSZ-661"></a>
<a name="index-GWINSZ_005fIN_005fSYS_005fIOCTL-662"></a><a name="index-g_t_0040file_007bsys_002fioctl_002eh_007d-663"></a>
<a name="index-g_t_0040file_007btermios_002eh_007d-664"></a>
<!-- FIXME: I need clarifications from Jim. -->
If the use of <code>TIOCGWINSZ</code> requires <samp><span class="file">&lt;sys/ioctl.h&gt;</span></samp>, then
define <code>GWINSZ_IN_SYS_IOCTL</code>.  Otherwise <code>TIOCGWINSZ</code> can be
found in <samp><span class="file">&lt;termios.h&gt;</span></samp>.

        <p>Use:

     <pre class="example">          #ifdef HAVE_TERMIOS_H
          # include &lt;termios.h&gt;
          #endif
          
          #ifdef GWINSZ_IN_SYS_IOCTL
          # include &lt;sys/ioctl.h&gt;
          #endif
</pre>
        </blockquote></div>

   </body></html>

