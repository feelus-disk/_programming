<html lang="en">
<head>
<title>Generic Compiler Characteristics - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Compilers-and-Preprocessors.html#Compilers-and-Preprocessors" title="Compilers and Preprocessors">
<link rel="prev" href="Specific-Compiler-Characteristics.html#Specific-Compiler-Characteristics" title="Specific Compiler Characteristics">
<link rel="next" href="C-Compiler.html#C-Compiler" title="C Compiler">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Generic-Compiler-Characteristics"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="C-Compiler.html#C-Compiler">C Compiler</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Specific-Compiler-Characteristics.html#Specific-Compiler-Characteristics">Specific Compiler Characteristics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Compilers-and-Preprocessors.html#Compilers-and-Preprocessors">Compilers and Preprocessors</a>
<hr>
</div>

<h4 class="subsection">5.10.2 Generic Compiler Characteristics</h4>

<p><a name="AC_005fCHECK_005fSIZEOF"></a>

<div class="defun">
&mdash; Macro: <b>AC_CHECK_SIZEOF</b> (<var>type-or-expr, </var><span class="roman">[</span><var>unused</var><span class="roman">]</span><var>, </var><span class="roman">[</span><var>includes = &lsquo;</var><samp><span class="samp">AC_INCLUDES_DEFAULT</span></samp><var>&rsquo;</var><span class="roman">]</span>)<var><a name="index-AC_005fCHECK_005fSIZEOF-838"></a></var><br>
<blockquote><p><a name="index-AC_005fCHECK_005fSIZEOF-839"></a>
<a name="index-SIZEOF_005f_0040var_007btype_002dor_002dexpr_007d-840"></a><a name="index-ac_005fcv_005fsizeof_005f_0040var_007btype_002dor_002dexpr_007d-841"></a>
Define <code>SIZEOF_</code><var>type-or-expr</var> (see <a href="Standard-Symbols.html#Standard-Symbols">Standard Symbols</a>) to be
the size in bytes of <var>type-or-expr</var>, which may be either a type or
an expression returning a value that has a size.  If the expression
&lsquo;<samp><span class="samp">sizeof (</span><var>type-or-expr</var><span class="samp">)</span></samp>&rsquo; is invalid, the result is 0. 
<var>includes</var> is a series of include directives, defaulting to
<code>AC_INCLUDES_DEFAULT</code> (see <a href="Default-Includes.html#Default-Includes">Default Includes</a>), which are used
prior to the expression under test.

        <p>This macro now works even when cross-compiling.  The <var>unused</var>
argument was used when cross-compiling.

        <p>For example, the call

     <pre class="example">          <!-- If you change this example, adjust tests/semantics.at:AC_CHECK_SIZEOF struct. -->
          AC_CHECK_SIZEOF([int *])
</pre>
        <p class="noindent">defines <code>SIZEOF_INT_P</code> to be 8 on DEC Alpha AXP systems.

        <p>This macro caches its result in the <code>ac_cv_sizeof_</code><var>type-or-expr</var>
variable, with &lsquo;<samp><span class="samp">*</span></samp>&rsquo; mapped to &lsquo;<samp><span class="samp">p</span></samp>&rsquo; and other characters not
suitable for a variable name mapped to underscores. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_CHECK_ALIGNOF</b> (<var>type, </var><span class="roman">[</span><var>includes = &lsquo;</var><samp><span class="samp">AC_INCLUDES_DEFAULT</span></samp><var>&rsquo;</var><span class="roman">]</span>)<var><a name="index-AC_005fCHECK_005fALIGNOF-842"></a></var><br>
<blockquote><p><a name="index-AC_005fCHECK_005fALIGNOF-843"></a>
<a name="index-ALIGNOF_005f_0040var_007btype_007d-844"></a><a name="index-ac_005fcv_005falignof_005f_0040var_007btype_002dor_002dexpr_007d-845"></a>
Define <code>ALIGNOF_</code><var>type</var> (see <a href="Standard-Symbols.html#Standard-Symbols">Standard Symbols</a>) to be the
alignment in bytes of <var>type</var>.  &lsquo;<samp><var>type</var><span class="samp"> y;</span></samp>&rsquo; must be valid as
a structure member declaration.  If &lsquo;<samp><span class="samp">type</span></samp>&rsquo; is unknown, the result
is 0.  If no <var>includes</var> are specified, the default includes are used
(see <a href="Default-Includes.html#Default-Includes">Default Includes</a>).

        <p>This macro caches its result in the <code>ac_cv_alignof_</code><var>type-or-expr</var>
variable, with &lsquo;<samp><span class="samp">*</span></samp>&rsquo; mapped to &lsquo;<samp><span class="samp">p</span></samp>&rsquo; and other characters not
suitable for a variable name mapped to underscores. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_COMPUTE_INT</b> (<var>var, expression, </var><span class="roman">[</span><var>includes = &lsquo;</var><samp><span class="samp">AC_INCLUDES_DEFAULT</span></samp><var>&rsquo;</var><span class="roman">]</span><var>, </var><span class="roman">[</span><var>action-if-fails</var><span class="roman">]</span>)<var><a name="index-AC_005fCOMPUTE_005fINT-846"></a></var><br>
<blockquote><p><a name="index-AC_005fCOMPUTE_005fINT-847"></a>
Store into the shell variable <var>var</var> the value of the integer
<var>expression</var>.  The
value should fit in an initializer in a C variable of type <code>signed
long</code>.  To support cross compilation (in which case, the macro only works on
hosts that use twos-complement arithmetic), it should be possible to evaluate
the expression at compile-time.  If no <var>includes</var> are specified, the
default includes are used (see <a href="Default-Includes.html#Default-Includes">Default Includes</a>).

        <p>Execute <var>action-if-fails</var> if the value cannot be determined correctly. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_LANG_WERROR</b><var><a name="index-AC_005fLANG_005fWERROR-848"></a></var><br>
<blockquote><p><a name="index-AC_005fLANG_005fWERROR-849"></a>
Normally Autoconf ignores warnings generated by the compiler, linker, and
preprocessor.  If this macro is used, warnings count as fatal
errors for the current language.  This macro is useful when the
results of configuration are used where warnings are unacceptable; for
instance, if parts of a program are built with the GCC
<samp><span class="option">-Werror</span></samp>
option.  If the whole program is built using <samp><span class="option">-Werror</span></samp> it is
often simpler to put <samp><span class="option">-Werror</span></samp> in the compiler flags (<code>CFLAGS</code>,
etc.). 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_OPENMP</b><var><a name="index-AC_005fOPENMP-850"></a></var><br>
<blockquote><p><a name="index-AC_005fOPENMP-851"></a>
<a name="index-g_t_005fOPENMP-852"></a><a name="index-OPENMP_005fCFLAGS-853"></a><a name="index-OPENMP_005fCXXFLAGS-854"></a><a name="index-OPENMP_005fFFLAGS-855"></a><a name="index-OPENMP_005fFCFLAGS-856"></a><a name="index-ac_005fcv_005fprog_005fc_005fopenmp-857"></a>
<a name="index-ac_005fcv_005fprog_005fcxx_005fopenmp-858"></a>
<a name="index-ac_005fcv_005fprog_005ff77_005fopenmp-859"></a>
<a name="index-ac_005fcv_005fprog_005ffc_005fopenmp-860"></a>
<a href="http://www.openmp.org/">OpenMP</a> specifies extensions of C, C++,
and Fortran that simplify optimization of shared memory parallelism,
which is a common problem on multicore CPUs.

        <p>If the current language is C, the macro <code>AC_OPENMP</code> sets the
variable <code>OPENMP_CFLAGS</code> to the C compiler flags needed for
supporting OpenMP.  <code>OPENMP_CFLAGS</code> is set to empty if the
compiler already supports OpenMP, if it has no way to activate OpenMP
support, or if the user rejects OpenMP support by invoking
&lsquo;<samp><span class="samp">configure</span></samp>&rsquo; with the &lsquo;<samp><span class="samp">--disable-openmp</span></samp>&rsquo; option.

        <p><code>OPENMP_CFLAGS</code> needs to be used when compiling programs, when
preprocessing program source, and when linking programs.  Therefore you
need to add <code>$(OPENMP_CFLAGS)</code> to the <code>CFLAGS</code> of C programs
that use OpenMP.  If you preprocess OpenMP-specific C code, you also
need to add <code>$(OPENMP_CFLAGS)</code> to <code>CPPFLAGS</code>.  The presence of
OpenMP support is revealed at compile time by the preprocessor macro
<code>_OPENMP</code>.

        <p>Linking a program with <code>OPENMP_CFLAGS</code> typically adds one more
shared library to the program's dependencies, so its use is recommended
only on programs that actually require OpenMP.

        <p>If the current language is C++, <code>AC_OPENMP</code> sets the variable
<code>OPENMP_CXXFLAGS</code>, suitably for the C++ compiler.  The same remarks
hold as for C.

        <p>If the current language is Fortran 77 or Fortran, <code>AC_OPENMP</code> sets
the variable <code>OPENMP_FFLAGS</code> or <code>OPENMP_FCFLAGS</code>,
respectively.  Similar remarks as for C hold, except that
<code>CPPFLAGS</code> is not used for Fortran, and no preprocessor macro
signals OpenMP support.

        <p>For portability, it is best to avoid spaces between &lsquo;<samp><span class="samp">#</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">pragma omp</span></samp>&rsquo;.  That is, write &lsquo;<samp><span class="samp">#pragma omp</span></samp>&rsquo;, not
&lsquo;<samp><span class="samp"># pragma omp</span></samp>&rsquo;.  The Sun WorkShop 6.2 C compiler chokes on the
latter.

        <p>This macro caches its result in the <code>ac_cv_prog_c_openmp</code>,
<code>ac_cv_prog_cxx_openmp</code>, <code>ac_cv_prog_f77_openmp</code>, or
<code>ac_cv_prog_fc_openmp</code> variable, depending on the current language. 
</p></blockquote></div>

   </body></html>

