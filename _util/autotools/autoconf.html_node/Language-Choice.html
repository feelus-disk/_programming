<html lang="en">
<head>
<title>Language Choice - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Writing-Tests.html#Writing-Tests" title="Writing Tests">
<link rel="next" href="Writing-Test-Programs.html#Writing-Test-Programs" title="Writing Test Programs">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Language-Choice"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Writing-Test-Programs.html#Writing-Test-Programs">Writing Test Programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Writing-Tests.html#Writing-Tests">Writing Tests</a>
<hr>
</div>

<h3 class="section">6.1 Language Choice</h3>

<p><a name="index-Language-1147"></a>
Autoconf-generated <samp><span class="command">configure</span></samp> scripts check for the C compiler and
its features by default.  Packages that use other programming languages
(maybe more than one, e.g., C and C++) need to test features of the
compilers for the respective languages.  The following macros determine
which programming language is used in the subsequent tests in
<samp><span class="file">configure.ac</span></samp>.

   <p><a name="AC_005fLANG"></a>

<div class="defun">
&mdash; Macro: <b>AC_LANG</b> (<var>language</var>)<var><a name="index-AC_005fLANG-1148"></a></var><br>
<blockquote><p><a name="index-AC_005fLANG-1149"></a>
Do compilation tests using the compiler, preprocessor, and file
extensions for the specified <var>language</var>.

        <p>Supported languages are:

          <dl>
<dt>&lsquo;<samp><span class="samp">C</span></samp>&rsquo;<dd>Do compilation tests using <code>CC</code> and <code>CPP</code> and use extension
<samp><span class="file">.c</span></samp> for test programs.  Use compilation flags: <code>CPPFLAGS</code> with
<code>CPP</code>, and both <code>CPPFLAGS</code> and <code>CFLAGS</code> with <code>CC</code>.

          <br><dt>&lsquo;<samp><span class="samp">C++</span></samp>&rsquo;<dd>Do compilation tests using <code>CXX</code> and <code>CXXCPP</code> and use
extension <samp><span class="file">.C</span></samp> for test programs.  Use compilation flags:
<code>CPPFLAGS</code> with <code>CXXCPP</code>, and both <code>CPPFLAGS</code> and
<code>CXXFLAGS</code> with <code>CXX</code>.

          <br><dt>&lsquo;<samp><span class="samp">Fortran 77</span></samp>&rsquo;<dd>Do compilation tests using <code>F77</code> and use extension <samp><span class="file">.f</span></samp> for
test programs.  Use compilation flags: <code>FFLAGS</code>.

          <br><dt>&lsquo;<samp><span class="samp">Fortran</span></samp>&rsquo;<dd>Do compilation tests using <code>FC</code> and use extension <samp><span class="file">.f</span></samp> (or
whatever has been set by <code>AC_FC_SRCEXT</code>) for test programs.  Use
compilation flags: <code>FCFLAGS</code>.

          <br><dt>&lsquo;<samp><span class="samp">Erlang</span></samp>&rsquo;<dd><a name="index-ERLC-1150"></a><a name="index-ERL-1151"></a><a name="index-ERLCFLAGS-1152"></a>Compile and execute tests using <code>ERLC</code> and <code>ERL</code> and use extension
<samp><span class="file">.erl</span></samp> for test Erlang modules.  Use compilation flags: <code>ERLCFLAGS</code>.

          <br><dt>&lsquo;<samp><span class="samp">Objective C</span></samp>&rsquo;<dd>Do compilation tests using <code>OBJC</code> and <code>OBJCPP</code> and use
extension <samp><span class="file">.m</span></samp> for test programs.  Use compilation flags:
<code>CPPFLAGS</code> with <code>OBJCPP</code>, and both <code>CPPFLAGS</code> and
<code>OBJCFLAGS</code> with <code>OBJC</code>.

          <br><dt>&lsquo;<samp><span class="samp">Objective C++</span></samp>&rsquo;<dd>Do compilation tests using <code>OBJCXX</code> and <code>OBJCXXCPP</code> and use
extension <samp><span class="file">.mm</span></samp> for test programs.  Use compilation flags:
<code>CPPFLAGS</code> with <code>OBJCXXCPP</code>, and both <code>CPPFLAGS</code> and
<code>OBJCXXFLAGS</code> with <code>OBJCXX</code>.

          <br><dt>&lsquo;<samp><span class="samp">Go</span></samp>&rsquo;<dd>Do compilation tests using <code>GOC</code> and use extension <samp><span class="file">.go</span></samp> for
test programs.  Use compilation flags <code>GOFLAGS</code>. 
</dl>
        </p></blockquote></div>

   <p><a name="AC_005fLANG_005fPUSH"></a>

<div class="defun">
&mdash; Macro: <b>AC_LANG_PUSH</b> (<var>language</var>)<var><a name="index-AC_005fLANG_005fPUSH-1153"></a></var><br>
<blockquote><p><a name="index-AC_005fLANG_005fPUSH-1154"></a>
Remember the current language (as set by <code>AC_LANG</code>) on a stack, and
then select the <var>language</var>.  Use this macro and <code>AC_LANG_POP</code>
in macros that need to temporarily switch to a particular language. 
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_LANG_POP</b> (<span class="roman">[</span><var>language</var><span class="roman">]</span>)<var><a name="index-AC_005fLANG_005fPOP-1155"></a></var><br>
<blockquote><p><a name="index-AC_005fLANG_005fPOP-1156"></a>
Select the language that is saved on the top of the stack, as set by
<code>AC_LANG_PUSH</code>, and remove it from the stack.

        <p>If given, <var>language</var> specifies the language we just <em>quit</em>.  It
is a good idea to specify it when it's known (which should be the
case<small class="dots">...</small>), since Autoconf detects inconsistencies.

     <pre class="example">          AC_LANG_PUSH([Fortran 77])
          # Perform some tests on Fortran 77.
          # ...
          AC_LANG_POP([Fortran 77])
</pre>
        </blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_LANG_ASSERT</b> (<var>language</var>)<var><a name="index-AC_005fLANG_005fASSERT-1157"></a></var><br>
<blockquote><p><a name="index-AC_005fLANG_005fASSERT-1158"></a>
Check statically that the current language is <var>language</var>. 
You should use this in your language specific macros
to avoid that they be called with an inappropriate language.

        <p>This macro runs only at <samp><span class="command">autoconf</span></samp> time, and incurs no cost at
<samp><span class="command">configure</span></samp> time.  Sadly enough and because Autoconf is a two
layer language <a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>, the macros
<code>AC_LANG_PUSH</code> and <code>AC_LANG_POP</code> cannot be &ldquo;optimizing&rdquo;,
therefore as much as possible you ought to avoid using them to wrap
your code, rather, require from the user to run the macro with a
correct current language, and check it with <code>AC_LANG_ASSERT</code>. 
And anyway, that may help the user understand she is running a Fortran
macro while expecting a result about her Fortran 77 compiler<small class="enddots">...</small>
</p></blockquote></div>

<div class="defun">
&mdash; Macro: <b>AC_REQUIRE_CPP</b><var><a name="index-AC_005fREQUIRE_005fCPP-1159"></a></var><br>
<blockquote><p><a name="index-AC_005fREQUIRE_005fCPP-1160"></a>
Ensure that whichever preprocessor would currently be used for tests has
been found.  Calls <code>AC_REQUIRE</code> (see <a href="Prerequisite-Macros.html#Prerequisite-Macros">Prerequisite Macros</a>) with an
argument of either <code>AC_PROG_CPP</code> or <code>AC_PROG_CXXCPP</code>,
depending on which language is current. 
</p></blockquote></div>

   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> Because M4 is not aware of Sh code,
especially conditionals, some optimizations that look nice statically
may produce incorrect results at runtime.</p>

   <hr></div>

   </body></html>

