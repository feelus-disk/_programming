<html lang="en">
<head>
<title>Running the Compiler - Autoconf</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Autoconf">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Writing-Tests.html#Writing-Tests" title="Writing Tests">
<link rel="prev" href="Running-the-Preprocessor.html#Running-the-Preprocessor" title="Running the Preprocessor">
<link rel="next" href="Running-the-Linker.html#Running-the-Linker" title="Running the Linker">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This manual (24 April 2012) is for GNU Autoconf
(version 2.69),
a package for creating scripts to configure source code packages using
templates and an M4 macro package.

Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with no Invariant Sections, no Front-Cover texts, and
     no Back-Cover Texts.  A copy of the license is included in the
     section entitled ``GNU Free Documentation License.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Running-the-Compiler"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Running-the-Linker.html#Running-the-Linker">Running the Linker</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Running-the-Preprocessor.html#Running-the-Preprocessor">Running the Preprocessor</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Writing-Tests.html#Writing-Tests">Writing Tests</a>
<hr>
</div>

<h3 class="section">6.4 Running the Compiler</h3>

<p>To check for a syntax feature of the current language's (see <a href="Language-Choice.html#Language-Choice">Language Choice</a>) compiler, such as whether it recognizes a certain keyword, or
simply to try some library feature, use <code>AC_COMPILE_IFELSE</code> to try
to compile a small program that uses that feature.

<div class="defun">
&mdash; Macro: <b>AC_COMPILE_IFELSE</b> (<var>input, </var><span class="roman">[</span><var>action-if-true</var><span class="roman">]</span><var>, </var><span class="roman">[</span><var>action-if-false</var><span class="roman">]</span>)<var><a name="index-AC_005fCOMPILE_005fIFELSE-1179"></a></var><br>
<blockquote><p><a name="index-AC_005fCOMPILE_005fIFELSE-1180"></a>
Run the compiler and compilation flags of the current language
(see <a href="Language-Choice.html#Language-Choice">Language Choice</a>) on the <var>input</var>, run the shell commands
<var>action-if-true</var> on success, <var>action-if-false</var> otherwise.  The
<var>input</var> can be made by <code>AC_LANG_PROGRAM</code> and friends.

        <p>It is customary to report unexpected failures with
<code>AC_MSG_FAILURE</code>.  This macro does not try to link; use
<code>AC_LINK_IFELSE</code> if you need to do that (see <a href="Running-the-Linker.html#Running-the-Linker">Running the Linker</a>).  If needed, <var>action-if-true</var> can further access the
just-compiled object file <samp><span class="file">conftest.$OBJEXT</span></samp>.

        <p>This macro uses <code>AC_REQUIRE</code> for the compiler associated with the
current language, which means that if the compiler has not yet been
determined, the compiler determination will be made prior to the body of
the outermost <code>AC_DEFUN</code> macro that triggered this macro to
expand (see <a href="Expanded-Before-Required.html#Expanded-Before-Required">Expanded Before Required</a>). 
</p></blockquote></div>

   <p><a name="index-ERL-1181"></a>For tests in Erlang, the <var>input</var> must be the source code of a module named
<code>conftest</code>.  <code>AC_COMPILE_IFELSE</code> generates a <samp><span class="file">conftest.beam</span></samp>
file that can be interpreted by the Erlang virtual machine (<code>ERL</code>).  It is
recommended to use <code>AC_LANG_PROGRAM</code> to specify the test program,
to ensure that the Erlang module has the right name.

   </body></html>

