<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=WINDOWS-1251">

<meta name="author" content="Nikolai Malykh">
<meta name="description" content="">
<meta name="keywords" content="">

<title>Перевод RFC 1771</title>
<style type="text/css">
 table.main {}
 tr.row {}
 td.cell {}
 div.block {}
 div.paragraph {}
 .font0 { font:9.00pt "Arial", sans-serif; }
 .font1 { font:10.00pt "Arial", sans-serif; }
 .font2 { font:11.00pt "Arial", sans-serif; }
 .font3 { font:12.00pt "Arial", sans-serif; }
 .font4 { font:13.00pt "Arial", sans-serif; }
 .font5 { font:14.00pt "Arial", sans-serif; }
 .font6 { font:16.00pt "Arial", sans-serif; }
 .font7 { font:27.00pt "Arial", sans-serif; }
 .font8 { font:9.00pt "Courier New", monospace; }
 .font9 { font:10.00pt "Courier New", monospace; }
 .font10 { font:11.00pt "Courier New", monospace; }
 .font11 { font:9.00pt "Times New Roman", serif; }
 .font12 { font:10.00pt "Times New Roman", serif; }
 .font13 { font:13.00pt "Times New Roman", serif; }
 .font14 { font:14.00pt "Times New Roman", serif; }
</style>
</head>

<body>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:210.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:220.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.48pt;">
<div class=paragraph><div align="center"><a href="index.htm">На главную
</a></div><br>
<div style="height: 90px;">
<script type="text/javascript"><!--
google_ad_client = "pub-0899253526956684";
/* 728x90 */
google_ad_slot = "3113460964";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell rowspan="2" valign="top" style=" width:66.24pt;">
<div class=block style=" width:66.24pt; height:37.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell colspan="5" valign="top" style=" width:495.12pt;">
<div class=block style=" width:495.12pt; height:36.24pt;">
<div class=paragraph style=" text-align:left;"><span class=font7><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:33.60pt;">
<div class=block style=" width:33.60pt; height:37.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.04pt;">
<div class=block style=" width:5.04pt; height:1.44pt;">
</div>
</td>
<td class=cell colspan="3" rowspan="2" valign="top" style=" width:487.20pt;">
<div class=block style=" width:487.20pt; height:14.16pt;">
<div class=paragraph style=" text-align:left;"><span class=font1><b> </b><span style=" color:rgb(0,0,255);"><b><u></u></b></span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:2.88pt;">
<div class=block style=" width:2.88pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:71.28pt;">
<div class=block style=" width:71.28pt; height:12.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:36.48pt;">
<div class=block style=" width:36.48pt; height:12.72pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.48pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:281.28pt;">
<div class=block style=" width:281.28pt; height:84.24pt;">
<div class=paragraph style=" padding:0.00pt 52.80pt 0.00pt 56.88pt; text-align:left;"><span class=font10 style=" line-height:12.48pt;"><b>Network Working Group Request for Comments: 1771 Obsoletes: 1654 Category: Standards Track</b></span></div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:313.68pt;">
<div class=block style=" width:313.68pt; height:84.24pt;">
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:left; text-indent:184.80pt;"><span class=font10 style=" line-height:12.48pt;"><b>Y. Rekhter T.J. Watson Research Center, IBM Corp.</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font10 style=" line-height:12.48pt;"><b>T. Li</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font10 style=" line-height:12.48pt;"><b>Cisco Systems</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font10 style=" line-height:12.48pt;"><b>Editors</b></span></div>
<div class=paragraph style=" padding:0.00pt 62.88pt 0.00pt 0.00pt; text-align:right;"><span class=font10 style=" line-height:12.48pt;"><b>March 1995</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:28.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:54.72pt;">
<div class=paragraph style=" padding:0.00pt 120.72pt 0.00pt 247.92pt; text-align:left; text-indent:-98.40pt;"><span class=font6 style=" line-height:31.20pt;"><b>A Border Gateway Protocol 4 (BGP-4) Протокол BGP-4</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:4.56pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:337.92pt;">
<div class=block style=" width:337.92pt; height:51.60pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font5><b><i>Статус документа</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 3.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Этот документ<sup>1</sup> содержит проект стандарта протокола Internet и протокола. Сведения о текущем состоянии стандартизации вы Standards (STD 1). Документ может распространяться свободно.</span></div>
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:257.04pt;">
<div class=block style=" width:257.04pt; height:51.60pt;">
<div class=paragraph style=" padding:16.32pt 27.84pt 0.00pt 0.00pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">служит приглашением к дискуссии в целях развития можете найти в документе Internet Official Protocol</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:481.68pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font5><b><i>Тезисы</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.28pt;">Этот документ вместе с Application of the Border Gateway Protocol in the Internet<sup>2</sup> определяет протокол маршрутизации между автономными системами Internet.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font5 style=" line-height:11.04pt;"><b><i>1.&nbsp;Благодарности</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Первый вариант этого документа был опубликован в RFC 1267 (октябрь 1991), разработанном Kirk Lougheed (Cisco</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Systems) и Yakov Rekhter (IBM).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Авторы выражают свою благодарность Guy Almes (ANS), Len Bosack (Cisco Systems) и Jeffrey C. Honig (Cornell</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">University) за их вклад в подготовку предварительных вариантов документа.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Отдельно отметим Bob Braden (ISI) за обзор предварительных вариантов документа и конструктивные замечания.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Благодарим также Bob Hinden (Director for Routing of the Internet Engineering Steering Group) и команду специалистов,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">подготовивших обзор предыдущей версии документа (BGP-2). Эта команда, в состав которой входят Deborah Estrin, Milo</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Medin, John Moy, Radia Perlman, Martha Steenstrup, Mike St. Johns и Paul Tsuchiya, показала в работе высокий уровень</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">профессионализма, упорство и такт.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Обновленный вариант документа является результатом работы IETF IDR Working Group. Редакторами документа</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">являются Yakov Rekhter и Tony Li. Некоторые разделы этого документа заимствованы из спецификации IDRP [7],</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">описывающей протокол BGP в рамках OSI. Подготовку этой спецификации обеспечила группа ANSI X3S3.3 под</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">руководством Lyman Chapin (BBN) и Charles Kunzinger (IBM Corp.), который выполнял в группе функции редактора</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">IDRP. Благодарим также Mike Craren (Proteon, Inc.), Dimitry Haskin (Bay Networks, Inc.), John Krawczyk (Bay Networks,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Inc.) и Paul Traina (Cisco Systems) за полезные и важные комментарии.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Особо отметим значительный вклад в работу Dennis Ferguson (MCI).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Работа Yakov Rekhter поддерживалась фондом National Science Foundation в рамках гранта NCR-9219216.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font5><b><i>2.&nbsp;Введение</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">BGP (Border Gateway Protocol – протокол граничного шлюза) является протоколом маршрутизации между автономными системами (AS). Протокол разработан с учетом опыта создания протокола EGP (RFC 904 [1]) и применения EGP на магистрали NSFNET (см. RFC 1092 [2] и RFC 1093 [3]).</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Основной функцией понимающей BGP системы является обмен информацией о доступности сетей с другими системами BGP. Информация о доступности сетей включает список автономных систем (AS), через которые проходит эта информация. Этих сведений достаточно для построения графа связности AS, из которого могут исключаться маршрутные петли (routing loop), а также приниматься некоторые решения на уровне политики AS. BGP-4 обеспечивает новые механизмы поддержки бесклассовой междоменной маршрутизации (CIDR). Эти механизмы включают поддержку анонсирования префикса IP и позволяют обойтись без концепции &laquo;класса&raquo; сетей в рамках BGP. BGP-4 также включает механизм объединения маршрутов, включающий объединение путей AS. Эти изменения в совокупности обеспечивают поддержку схемы &laquo;суперсетей&raquo; (supernetting scheme) [8, 9].</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Для того чтобы охарактеризовать набор решений, которые могут быть реализованы с использованием BGP, следует принять правило, по которому узел BGP может анонсировать узлам-партнерам (peer) в соседних AS только те маршруты, которые этот узел использует сам. Это правило отражает парадигму поэтапной (hop-by-hop) маршрутизации, используемую в сети Internet для большинства случаев. Отметим, что некоторые правила не могут поддерживаться в рамках парадигмы &quot;hop-by-hop&quot; и, следовательно, требуется использовать другие методы маршрутизации (такие, как source routing). Например, BGP не позволяет AS передавать в соседнюю AS информацию, показывающую маршрут, отличающийся от того, который будет использоваться для трафика, происходящего из соседней AS. С другой стороны, BGP может поддерживать любые правила, соответствующие парадигме поэтапной маршрутизации. Поскольку в</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:10.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:43.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font11 style=" line-height:9.84pt;"><sup>1</sup>В январе 2006 г. выпущен документ RFC 4271, в котором данная спецификация признана утратившей силу. Перевод RFC 4271</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font11 style=" line-height:9.84pt;">имеется на сайте <span style=" color:rgb(0,0,255);"><u>h ttp : // w ww .p rotocols . r u</u> </span>. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font11 style=" line-height:9.84pt;"><sup>2</sup> RFC 1772 (на сайте <span style=" color:rgb(0,0,255);"><u>http :// www . protocols . r u</u> </span>имеется перевод этого документа на русский язык). <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="7" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:21.36pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:66.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:5.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:210.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:220.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:2.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">современной сети Internet используется только парадигма поэтапной маршрутизации и BGP может поддерживать любые правила, соответствующие этой парадигме, протокол BGP очень распространен для маршрутизации между AS в современной сети Internet.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Более полное обсуждение возможности использования тех или иных правил с протоколом BGP выходит за пределы данного документа и рассматривается в работе [5], посвященной использованию BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">BGP использует транспортные протоколы с гарантированной доставкой. Это позволяет избавиться от необходимости поддержки механизмов фрагментации, передачи, подтверждения доставки и нумерации пакетов. Любая схема аутентификации, обеспечиваемая транспортным протоколом, может использоваться в дополнение к встроенным средствам аутентификации BGP. Используемый в BGP механизм уведомлений об ошибках предполагает, что транспортный протокол поддерживает &laquo;элегантное завершение сеансов (&quot;graceful&quot; close), т. е. все остающиеся данные будут доставлены до разрыва соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">BGP использует на транспортном уровне протокол TCP [4]. TCP удовлетворяет транспортным требованиям BGP и поддерживается практически всеми современными маршрутизаторами и хостами. При последующем обсуждении слова &laquo;соединение транспортного уровня&raquo; (transport protocol connection) следует понимать как соединение TCP. Протокол BGP использует для организации соединений порт TCP с номером 179.</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">В этом документе постоянно будет встречаться термин &laquo;автономная система&raquo; (AS). По классическому определению автономная система представляет собой множество маршрутизаторов с единым техническим администрированием, использующих один протокол внутренней маршрутизации (IGP) и единую метрику для маршрутизации пакетов внутри AS, а для передачи пакетов в другие автономные системы применяющих протокол внешней маршрутизации (exterior gateway protocol или EGP). Со временем классическое определение было расширено и в современном понимании AS может использовать несколько протоколов внутренней маршрутизации, а в некоторых случаях даже несколько наборов метрик в рамках одной AS. Использование термина AS в таких случаях обусловлено тем, что даже при использовании множества метрик и протоколов IGP администрирование такой AS с точки зрения других автономных систем выглядит как единый план внутренней маршрутизации и показывает согласованную картину доступности адресатов с использованием данной AS.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Планируемое использование BGP в среде Internet включает такие вопросы, как топология, взаимодействие между BGP и протоколами IGP, а также исполнение правил политики маршрутизации, рассмотренных в работе [5], являющейся дополнением к настоящей спецификации. Этот документ является первым из серии планируемых работ по различным аспектам применения протокола BGP. Вы можете отправлять свои комментарии к этому документу по адресу списка рассылок BGP (<span style=" color:rgb(0,0,255);"><u>b gp @ a ns . n et</u> </span>).</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font4><b><i>3. Обзор</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Две системы организуют между собой соединение на транспортном уровне. После этого системы обмениваются сообщениями для согласования и подтверждения параметров соединения. Первоначальный поток данных включает всю таблицу маршрутизации BGP. При изменении таблиц маршрутизации передаются обновления. Протокол BGP не требует периодического обновления всей таблицы маршрутизации BGP. Следовательно, узел BGP должен сохранять текущие версии полных таблиц маршрутов BGP всех соседей одного уровня (peer) в течение всего соединения. Для обеспечения сохранности соединения периодически передаются сообщения KeepAlive. При возникновении ошибок и в иных специальных случаях передаются специальные уведомления. При возникновении ошибок в соединении передается уведомление об этом и соединение закрывается.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Хосты, использующие протокол BGP, не обязаны быть маршрутизаторами. Не являющиеся маршрутизаторами хосты могут обмениваться маршрутной информацией с маршрутизаторами с помощью протокола EGP или даже протокола внутренней маршрутизации. В таких случаях эти хосты могут использовать протокол BGP для обмена маршрутными данными с граничным маршрутизатором в другой AS. Реализация и использование этой архитектуры является предметом последующего изучения.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если отдельная AS имеет множество узлов BGP и обеспечивает транзит для других AS, внутри этой системы должна обеспечиваться согласованная картина маршрутизации, обеспечиваемая протоколом внутренней маршрутизации (IGP). Согласованная картина путей за пределы AS может обеспечиваться за счет прямых соединений между всеми узлами BGP в масштабе данной AS. Используя общий набор правил, узлы BGP согласуют политику обслуживания точек входа-выхода для конкретных адресатов за пределами данной AS. Эта информация передается внутренним маршрутизаторам AS (возможно с использованием протокола внутренней маршрутизации). Должны быть приняты меры по обеспечению обновления транзитной информации на внутренних маршрутизаторах до того, как узлы BGP анонсируют другим AS возможность обеспечения транзитного сервиса.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Соединения между узлами BGP разных AS будем называть внешними каналами, а соединения между узлами BGP в одной AS - внутренними. Узлы одного уровня (peer) из других AS будем называть внешними, а узлы в той же AS -внутренними.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>3.1 Маршруты: анонсирование и хранение</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">При описании этого протокола маршрут определяется как единица информации, содержащая пару &laquo;отправитель-получатель&raquo; с атрибутами каждого из них.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Маршруты анонсируются между парами узлов BGP как сообщения UPDATE – получателем является система, чей IP-адрес указывается в поле NLRI (Network Layer Reachability Information – информация о доступности на сетевом уровне), а путь указывается содержимым полей атрибутов пути в том же сообщении UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Маршруты сохраняются в базах данных RIB (Routing Information Base – база маршрутной информации) с использованием формата Adj-RIBs-In, Loc-RIB, Adj-RIBs-Out. Маршруты, которые будут анонсироваться другим узлам BGP, должны быть включены в Adj-RIB-Out; маршруты, используемые локальным узлом BGP, должны быть указаны в Loc-RIB, а следующий маршрутизатор (next hop) для каждого из этих маршрутов должен быть представлен в базе рассылки маршрутной информации локального узла BGP; маршруты, полученные от других узлов BGP, включаются в Adj-RIBs-In.</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если узел BGP решает анонсировать маршрут, он может добавить или изменить атрибуты пути для этого маршрута перед анонсированием маршрута другому узлу (peer).</span></div>
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:713.28pt;">
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Протокол BGP обеспечивает механизм, с помощью которого узел BGP может информировать узел-партнер (peer) о том, что анонсированный ранее маршрут больше не может использоваться. Для такого оповещения могут служить три метода:</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp; </b>в поле WITHDRAWN ROUTES сообщения UPDATE может быть передан префикс IP, указывающий получателя для анонсированного маршрута,- это говорит, что связанный с адресатом маршрут больше не доступен;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>может быть анонсирован новый маршрут с тем же значением NLRI в качестве замены прежнего маршрута;</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:12.00pt;"><b>&#9830;&nbsp; </b>соединение между двумя узлами BGP может быть закрыто - это ведет к полному удалению всех маршрутов, которые эта пара узлов BGP анонсировала друг другу.</span></div>
<div class=paragraph style=" padding:5.52pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font4><b>3.2 Базы данных о маршрутах</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">База маршрутной информации (RIB) узла BGP состоит из трех частей:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>Adj-RIBs-In</b>: маршрутная информация, полученная во входящих сообщениях UPDATE. Эти данные представляют</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">маршруты, которые могут использоваться в качестве входных данных для принятия решения (Decision Process).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>Loc-RIB</b>: локальные маршрутные данные, которые узел BGP выбирает на основе своих локальных правил из данных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Adj-RIBs-In.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>Adj-RIBs-Out</b>: данные, которые локальный узел BGP выбрал для анонсирования peer-узлам. Маршрутные данные из</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 57.12pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">Adj-RIBs-Out будут передаваться локальным узлом BGP в сообщениях UPDATE. Adj-RIBs-In содержит необработанные маршрутные данные, которые получены локальным узлом BGP от узлов-партнеров; Loc-RIB содержит маршруты, выбранные с помощью Decision Process локального узла BGP; Adj-RIBs-Out включает маршрут, которые анонсируются в другие системы с помощью сообщений UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Хотя концептуальная модель различает Adj-RIBs-In, Loc-RIB и Adj-RIBs-Out, совершенно не обязательно хранить три отдельных копии маршрутной информации. Выбор числа копий для конкретной реализации (например, 3 копии или 1 копия с указателями на каждую часть) не рассматривается в данной спецификации.</span></div>
<div class=paragraph style=" padding:6.96pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font4><b><i>4. Формат сообщений</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этом разделе описаны форматы сообщений, используемых протоколом BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Сообщения передаются с использованием транспортных соединений с гарантированной доставкой. Обработка сообщения происходит после того, как оно будет полностью принято. Максимальный размер сообщения составляет 4096 октетов. От всех реализаций требуется поддержка указанного значения для максимального размера сообщений. Минимальное сообщение, которое может быть передано, содержит только заголовок BGP (19 октетов).</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font4 style=" letter-spacing:-1.00pt;"><b>4.1</b><span style=" letter-spacing:0.00pt;"><b>&nbsp; </b></span><span style=" letter-spacing:-0.20pt;"><b>Формат заголовка сообщений</b></span></span></div>
<div class=paragraph style=" padding:0.24pt 28.08pt 0.00pt 57.12pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Каждое сообщение имеет заголовок фиксированного размера. В зависимости от типа сообщения после заголовка может следовать то или иное количество полей данных. Схема размещения полей показана ниже:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.28pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">0<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><b><u>|</u> </b>1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>2<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>3</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.28pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:5.90pt;">0|1|2|3|4|5|6|7|89[01234567|89|01|2|3|4|5|6|78|90|1</span></div>
<div class=paragraph style=" padding:10.80pt 0.00pt 0.00pt 297.36pt; text-align:left;"><span class=font12>Marker</span></div>
<div class=paragraph style=" padding:11.04pt 0.00pt 0.00pt 170.64pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Length<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Type</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.40pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Marker - маркер:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Это 16-октетное поле содержит значение, которое может быть предсказано получателем сообщения. Если Type = OPEN или сообщение OPEN не содержит Authentication Information (как дополнительного параметра - Optional Parameter), все биты поля Marker должны иметь значение 1. В остальных случаях значение маркера может быт предсказано путем расчетов, являющихся частью используемого механизма аутентификации (часть Authentication Information). Поле Marker может использоваться для обнаружения потери синхронизации между парой узлов BGP и аутентификации входящих сообщений BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.64pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Length - длина:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Это 2-октетное поле содержит беззнаковое целое число, указывающее общий размер сообщения (с учетом заголовка) в октетах. Эта информация позволяет находить следующее сообщение (поле Marker) в транспортном потоке. Значение поля Length должно лежать в диапазоне от 19 до 4096 (в зависимости от типа сообщения возможны дополнительные ограничения). Заполнение сообщений пустыми полями не допускается, поэтому поле длины должно иметь минимальное значение, достаточное для передачи сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Type - тип:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это 1-октетное поле содержит беззнаковое целое число, определяющее тип сообщения:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 94.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp;- OPEN (соединение)</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp;- UPDATE (обновление)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3&nbsp;- NOTIFICATION (уведомление)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 93.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4&nbsp;- KEEP ALIVE (подтверждение)</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.50pt;"><b>4.2</b><span style=" letter-spacing:0.00pt;"><b>&nbsp;</b></span><span style=" letter-spacing:-0.20pt;"><b>Формат сообщений OPEN</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">После организации соединения на транспортном уровне, первым сообщение от каждой из сторон имеет тип OPEN. После восприятия сообщения OPEN узел возвращает сообщение KEEP ALIVE, которое подтверждает прием сообщения OPEN. После подтверждения OPEN может происходить обмен сообщениями UPDATE, KEEPALIVE, и NOTIFICATION. В дополнение к стандартному заголовку BGP сообщение OPEN содержит следующие поля:</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:74.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:79.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:351.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:243.36pt;">
<div class=block style=" width:243.36pt; height:12.72pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:351.60pt;">
<div class=block style=" width:351.60pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 212.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 30.96pt; text-align:left;"><span class=font12>0<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>2<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.20pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:163.68pt;">
<div class=block style=" width:163.68pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 12.00pt 0.00pt 76.08pt; text-align:left; text-indent:-45.36pt;"><span class=font12 style=" line-height:11.04pt; letter-spacing:9.90pt;"><u>01234567 </u><span style=" letter-spacing:0.00pt;">Version</span></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:431.28pt;">
<div class=block style=" width:431.28pt; height:22.08pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font12 style=" letter-spacing:10.25pt;">890123456789012345678901</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.28pt;">
<div class=block style=" width:107.28pt; height:33.36pt;">
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:136.08pt;">
<div class=block style=" width:136.08pt; height:33.36pt;">
<div class=paragraph style=" padding:0.00pt 38.40pt 0.00pt 27.36pt; text-align:left; text-indent:-27.36pt;"><span class=font12 style=" line-height:11.04pt;">My Autonomous System Hold Time</span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:351.60pt;">
<div class=block style=" width:351.60pt; height:46.56pt;">
<div class=paragraph style=" padding:22.32pt 0.00pt 0.00pt 11.28pt; text-align:left;"><span class=font12>BGP Identifier</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:243.36pt;">
<div class=block style=" width:243.36pt; height:13.20pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 64.08pt; text-align:left;"><span class=font12>Opt Parm Len</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:9.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 243.36pt; text-align:left;"><span class=font12>Optional Parameters</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.00pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:683.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.52pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b><i>Version - версия:</i></b></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;">Однооктетное беззнаковое целое, указывающее номер версии протокола BGP (для данной версии - 4).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 27.84pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b><i>My Autonomous System - моя AS:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;">2-октетное беззнаковое целое, указывающее номер автономной системы отправителя.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.08pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b><i>Hold Time - время удержания:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 46.56pt; text-align:justify;"><span class=font12 style=" line-height:10.80pt;">2-октетное беззнаковое целое, определяющее время (в секундах), которое отправитель предлагает в качестве значения таймера удержания (Hold Timer). Получив сообщение OPEN, узел BGP <b>должен </b>выбрать значение Hold Timer (меньшее из настроенного и полученного в сообщении OPEN значений Hold Time). Если значение Hold Time не равно 0, оно <b>должно </b>быть не меньше 3 секунд. Реализации протокола могут отвергать соединения на основе значения Hold Time. Выбранное значение показывает максимальный интервал (в секундах) между передачей последовательных сообщений KEEP ALIVE и/или UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 27.84pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b><i>BGP Identifier - идентификатор BGP:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.56pt; text-align:justify;"><span class=font12 style=" line-height:10.80pt;">4-октетное беззнаковое целое, указывающее идентификатор BGP для отправителя. Узел BGP устанавливает в качестве значения идентификатора BGP IP-адрес, присвоенный этому узлу BGP. Значение BGP Identifier определяется при загрузке и совпадает для всех локальных интерфейсов и всех узлов BGP одного ранга.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b><i>Optional Parameters Length - размер дополнительных параметров:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 46.56pt; text-align:justify;"><span class=font12 style=" line-height:10.80pt;">Это 1-октетное поле показывает размер поля дополнительных параметров (Optional Parameters) в октетах. Нулевое значение поля говорит об отсутствии дополнительных параметров.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b><i>Optional Parameters - дополнительные параметры:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 57.12pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:10.80pt;">Это поле может содержать список дополнительных параметров, представленный в формате Parameter Type, Parameter Length, Parameter Value&gt; (тип, размер и значение параметра).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 106.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">0<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>1</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 106.32pt; text-align:left;"><span class=font9 style=" line-height:10.80pt;">0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5</span></div>
<div class=paragraph style=" padding:11.52pt 0.00pt 0.00pt 102.00pt; text-align:left;"><span class=font9>|  Parm. Type   | Parm. Length  |  Parameter Value (переменный размер)</span></div>
<div class=paragraph style=" padding:11.04pt 56.16pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Поле Parameter Type занимает один октет и однозначно идентифицирует отдельно взятый параметр. Поле Parameter Length имеет размер 1 октет и определяет число октетов в поле Parameter Value. Поле Parameter Value не имеет фиксированного размера и интерпретируется в зависимости от значения поля Parameter Type. В данной спецификации определяются следующие типы дополнительных параметров: <b>Authentication Information </b>(данные аутентификации, тип 1):</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Этот параметр может использоваться для подтверждения полномочий партнера BGP (peer). Поле Parameter Value содержит 1-октетный код аутентификации, за которым следует поле данных переменной длины.</span></div>
<div class=paragraph style=" padding:10.32pt 0.00pt 0.00pt 123.60pt; text-align:left;"><span class=font9>0 1 2 3 4 5 6 7 8</span></div>
<div class=paragraph style=" padding:11.28pt 0.00pt 0.00pt 125.04pt; text-align:left;"><span class=font9>|  Auth. Code   |</span></div>
<div class=paragraph style=" padding:10.32pt 0.00pt 0.00pt 122.40pt; text-align:left;"><span class=font9>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 125.04pt; text-align:left;"><span class=font9>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Authentication Data<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 125.04pt; text-align:left;"><span class=font9>|<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>|</span></div>
<div class=paragraph style=" padding:7.20pt 0.00pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Authentication Code </i></b>(код аутентификации)</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 82.56pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Это 1-октетное поле содержит беззнаковое целое число, которое указывает используемый механизм аутентификации. При использовании протокола BGP с аутентификацией в спецификацию должны включаться три вещи:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 91.20pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>значение кода (Authentication Code), показывающее используемый механизм</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 91.20pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>форма или значение поля Authentication Data</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 91.20pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>алгоритм расчета значений полей Marker.</span></div>
<div class=paragraph style=" padding:0.48pt 56.16pt 0.00pt 63.60pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Отметим, что при организации соединений на транспортном уровне может использоваться отдельный механизм аутентификации. <b><i>Authentication Data </i></b>(данные аутентификации)</span></div>
<div class=paragraph style=" padding:0.00pt 82.80pt 0.00pt 28.32pt; text-align:left; text-indent:54.24pt;"><span class=font12 style=" line-height:11.04pt;">Форм и значение этого поля переменной длины зависят от кода аутентификации (Authentication Code). Минимальный размер сообщения OPEN составляет 29 октетов с учетом заголовка.</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font4><b>4.3 Формат сообщений UPDATE</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Сообщения UPDATE используются для передачи маршрутной информации между узлами BGP. Данные из пакетов UPDATE могут использоваться для построения графа, описывающего связи между различными AS. Применение обсуждаемых здесь правил позволяет избавиться от петель и некоторых других аномалий в маршрутизации между AS.</span></div>
<div class=paragraph style=" padding:20.64pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:79.68pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:351.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:306.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:70.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:774.72pt;">
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Сообщение UPDATE служит для анонсирования одного возможного маршрута к узлу-партнеру или для отзыва группы анонсированных ранее маршрутов (см. 3.1). Сообщение UPDATE может одновременно анонсировать доступный маршрут и отзывать группу недоступных более маршрутов. Сообщения UPDATE всегда включают заголовок BGP фиксированного размера и м<u>огут содержать дополнительные поля, показанные ниже:</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;">Unfeasible Routes Length (2 октета)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;">Withdrawn Routes (переменный размер)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;"><u>Total Path Attribute Length (2 октета)</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;"><u>Path Attributes (переменный размер)</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;">Network Layer Reachability Information (переменный размер)</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Unfeasible Routes Length (размер недоступных маршрутов)</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это 2-октетное беззнаковое целое число указывает общий размер поля Withdrawn Routes в октетах. Значение этого поля должно позволять определение размера поля Network Layer Reachability Information в соответствии с приведенным ниже описанием. Нулевое значение говорит об отсутствии отзываемых маршрутов и поля Withdrawn Routes в сообщении UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Withdrawn Routes (отзываемые маршруты)</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Это поле переменной длины содержит список префиксов IP-адресов, маршруты к которым исключаются из обслуживания. Каждый префикс IP-адреса представляется в 2-компонентном формате &lt;length, prefix&gt;, показанном ниже:</span></div>
<div class=paragraph style=" padding:0.00pt 225.12pt 0.00pt 74.88pt; text-align:left; text-indent:24.96pt;"><span class=font12 style=" line-height:11.04pt;">Length (1 октет) Prefix (переменный размер) Поля имеют следующие значения:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Length </i></b>(длина):</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">показывает размер префикса IP-адреса в битах; нулевое значение поля длины указывает префикс,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">соответствующий всем адресам IP (сам префикс содержит 0 октетов).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Prefix </i></b>(префикс):</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">содержит префикс адреса IP, за которым следует несколько битов, используемых для выравнивания по границе</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">октета (отметим, что значение битов заполнения не играет роли).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Total Path Attribute Length (общий размер атрибутов пути)</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это 2-октетное беззнаковое целое задает общую длину поля атрибутов пути (Path Attributes) в октетах. Значение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">этого поля должно позволять определение длины поля Network Layer Reachability в соответствии с описанной ниже</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">процедурой.</span></div>
<div class=paragraph style=" padding:0.00pt 60.24pt 0.00pt 56.88pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">Значение 0 говорит об отсутствии поля Network Layer Reachability Information в данном сообщении UPDATE. <b><i>Path Attributes </i></b>(атрибуты пути)<b><i>:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Последовательность атрибутов пути (переменной длины) присутствует в каждом сообщении UPDATE. Каждый</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">атрибут представляет собой триплет формата &lt;attribute type, attribute length, attribute value&gt; размер которого может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">меняться.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2-октетное поле Attribute Type содержит октет флагов (Attribute Flags) за которым следует октет типа (Attribute Type</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Code).</span></div>
<div class=paragraph style=" padding:0.00pt 162.24pt 0.00pt 190.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">01 <span style=" letter-spacing:9.35pt;"><u>0123456789012345 </u></span><u>Attribute Flags</u><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><u>Attribute Type Code</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Старший бит (0) октета Attribute Flags является битом Optional и определяет тип атрибута – дополнительный (1) или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">хорошо известный (0).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Второй бит (1) поля Attribute Flags является битом Transitive, определяющим назначение дополнительного атрибута</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">– переходный (1) или непереходный (0). Для хорошо известных атрибутов бит Transitive должен всегда иметь</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">значение 1 (дополнительное рассмотрение переходных атрибутов приводится в главе 5).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Третий бит (2) поля Attribute Flags является флагом Partial. Этот бит показывает полноту информации, содержащейся</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">в дополнительном переходном атрибуте – информация полная (0) или неполная (1). Для хорошо известных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">атрибутов бит Partial должен иметь значение 0.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Четвертый флаг (бит 3) задает бит Extended Length, определяющий размер поля Attribute Length – 1 октет (0) или 2</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">октета (1). Флаг Extended Length может использоваться только в тех случаях, когда размер поля атрибутов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">превышает 255 октетов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Четыре младших бита поля Attribute Flags не используются и должны иметь нулевые значения (на приемной стороне</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">эти биты игнорируются).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Октет Attribute Type Code содержит код типа атрибута. Определенные в настоящее время типы рассматриваются в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">главе 5.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если бит Extended Length поля Attribute Flags имеет значение 0, третий октет поля Path Attribute содержит размер</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">данных атрибута в октетах.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если бит Attribute Flags поля флагов имеет значение 1, третий и четвертый октеты содержат размер данных атрибута</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">в октетах.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Оставшиеся октеты поля Path Attribute представляют значение атрибута и интерпретируются в соответствии со</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">значениями полей Attribute Flags и Attribute Type Code:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.60pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>ORIGIN </b>(тип 1):</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Атрибут ORIGIN относится к числу хорошо известных и является обязательным – он определяет источник информации о пути. Октет данных атрибута может принимать следующие значения:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 110.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IGP – информация NLRI является внутренней для AS, из которой пришло сообщение</span></div>
<div class=paragraph style=" padding:0.00pt 191.04pt 0.00pt 110.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EGP – информация NLRI получена с помощью EGP INCOMPLETE – данные NLRI получены каким-либо иным способом.</span></div>
<div class=paragraph style=" padding:0.00pt 263.76pt 0.00pt 75.60pt; text-align:left; text-indent:17.28pt;"><span class=font12 style=" line-height:11.04pt;">Использование этого атрибута описано в параграфе 5.1.1 <b>AS_PATH </b>(тип 2):</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:12.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:306.24pt;">
<div class=block style=" width:306.24pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>5</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 114.72pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:306.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:70.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">AS_PATH является хорошо известным обязательным атрибутом, который содержит последовательность сегментов пути AS. Каждый сегмент пути AS представляется тройкой значений &lt;path segment type, path segment length, path segment value&gt;. 1-октетное поле типа сегмента может содержать следующие значения:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 82.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS_SET: неупорядоченный набор AS, через которые проходит маршрут из сообщения UPDATE</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 64.32pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AS_SEQUENCE: упорядоченный набор AS, через которые проходит маршрут из сообщения UPDATE. Поле path segment length размером 1 октет указывает число AS в сегменте пути.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Значение path segment value содержит один или несколько номеров AS, каждый из которых представлен 2-октетным полем. Использование этого атрибута описано в параграфе 5.1.2.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>NEXT_HOP </b>(тип 3):</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Этот хорошо известный обязательный атрибут указывает IP-адрес граничного маршрутизатора, который следует использовать как следующий интервал (next hop) для адресата, указанного в поле Network Layer Reachability сообщения UPDATE. Использование этого атрибута описано в параграфе 5.1.3.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 45.60pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>MULTI_EXIT_DISC </b>(тип 4):</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 64.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Этот необязательный непереходный атрибут представляет собой 4-октетное неотрицательное целое число. Значение атрибута может использоваться в процессе принятия узлом BGP решения по вопросу избавления от множественных точек выхода в соседнюю автономную систему. Использование этого атрибута описано в параграфе 5.1.4.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 45.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>LOCAL_PREF </b>(тип 5):</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">LOCAL_PREF является хорошо известным необязательным атрибутом, содержащим 4-октетное неотрицательное целое число. Значение атрибута используется узлом BGP для информирования других узлов BGP в своей автономной системе об уровне предпочтения для анонсируемого маршрута. Использование этого атрибута описано в параграфе 5.1.5.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 45.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>ATOMIC_AGGREGATE </b>(тип 6)</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 64.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">ATOMIC_AGGREGATE является хорошо известным необязательным атрибутом нулевой длины. Этот атрибут используется узлом BGP для информирования других узлов BGP о том, локальная система выбрала менее специфичный маршрут без выбора более специфичного маршрута, который включен в нее. Использование этого атрибута описано в параграфе 5.1.6.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 45.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>AGGREGATOR </b>(тип 7)</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">AGGREGATOR представляет собой дополнительный атрибут длиной 6 октетов. Этот атрибут содержит номер последней AS, которая формирует агрегированный маршрут (2 октета), за ним следует IP-адрес узла BGP, который формирует агрегированный маршрут (4 октета). Использование этого атрибута описано в параграфе 5.1.7 <b><i>Network Layer Reachability Information </i></b>(информация о доступности на сетевом уровне):</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это поле переменной длины содержит список префиксов IP-адресов. Размер поля NLRI в октетах не задается в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">явном виде, но может быть рассчитан как:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 55.44pt; text-align:left;"><span class=font8 style=" line-height:11.04pt;"><b>UPDATE message Length - 23 - Total Path Attributes Length - Unfeasible Routes Length</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">значение UPDATE message Length берется из заголовка BGP, значения полей Total Path Attribute Length и Unfeasible Routes Length определяются из сообщения UPDATE, а значение 23 является суммарной длиной заголовка BGP и полей Total Path Attribute Length, Unfeasible Routes Length field.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Информация о доступности представляется в виде одной или нескольких последовательностей &lt;length, prefix&gt;, описанных ниже:</span></div>
<div class=paragraph style=" padding:0.00pt 253.44pt 0.00pt 64.32pt; text-align:left; text-indent:24.96pt;"><span class=font12 style=" line-height:11.04pt;">Length (1 октет) Prefix (переменный размер) <b><i>Length </i></b>(размер):</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 64.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это поле задает число битов префикса IP-адреса. Нулевое значение задает префикс, соответствующий любому адресу IP (сам префикс в этом случае содержит 0 октетов). <b><i>Prefix </i></b>(префикс):</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это поле содержит префикс адреса IP, за которым могут следовать биты заполнения для выравнивания по границе октета. Значение битов заполнения не играет роли. Минимальный размер сообщения UPDATE составляет 23 октета - 19 октетов занимает стандартный заголовок, 2 октета – поле Unfeasible Routes Length, 2 октета – поле Total Path Attribute Length (Unfeasible Routes Length = 0  и Total Path Attribute Length = 0).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Сообщение UPDATE может анонсировать по крайней мере один маршрут, который может быть описан несколькими атрибутами пути. Все атрибуты пути, содержащиеся в данном сообщении UPDATE, применимы к адресатам, указанным в поле Network Layer Reachability Information сообщения UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Сообщение UPDATE может включать список маршрутов, обслуживание которых прекращено. Каждый из таких маршрутов указывается префиксом адресата, который однозначно идентифицирует маршрут в контексте узла BGP – соединение узла BGP, для которого это маршрут был анонсирован ранее.</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Сообщение UPDATE может анонсировать только отзыв маршрутов. В этом случае сообщение не содержит атрибутов пути и данных NLRI. И наоборот, сообщение может анонсировать только доступный маршрут и не включать поля WITHDRAWN ROUTES.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>4.4 Формат сообщения KEEPALIVE</b></span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">BGP не использует на транспортном уровне каких-либо механизмов keep-alive для проверки доступности других узлов (peer). Вместо этого используются сообщения KEEPALIVE, которыми партнеры обмениваются достаточно часто, чтобы между двумя сообщениями не истекло время, заданное таймером удержания (Hold Timer). Разумным значением максимального интервала между передачей двух последовательных сообщений KEEPALIVE является треть интервала, заданного значением Hold Time. <b>Недопустимо </b>передавать сообщения KEEPALIVE чаще одного раза в секунду. Разработчики <b>могут </b>установить интервал между передачей сообщений KEEPALIVE как функцию значения Hold Time. Если Hold Time = 0, периодическая передача сообщений KEEPALIVE <b>недопустима</b>.</span></div>
<div class=paragraph style=" padding:1.92pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:184.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:76.32pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>Сообщение KEEPALIVE состоит только из заголовка, следовательно, размер такого сообщения равен 19 октетам.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4 style=" line-height:11.04pt;"><b>4.5 Формат сообщения NOTIFICATION</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Сообщения NOTIFICATION передаются в случаях обнаружения ошибок. Соединение BGP незамедлительно закрывается</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">после передачи такого сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В дополнение к стандартному заголовку BGP сообщение NOTIFICATION содержит следующие поля:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.04pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">0<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style=" letter-spacing:118.20pt;">123</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.44pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:6.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 59.28pt; text-align:left;"><span class=font12 style=" letter-spacing:10.55pt;">01234567890123456789012345678901</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:0.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:561.12pt;">
<div class=block style=" width:561.12pt; height:101.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 99.12pt; text-align:left;"><span class=font12>Error code<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Error subcode<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Данные</span></div>
<div class=paragraph style=" padding:8.64pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Error Code </i></b>(код ошибки)<b><i>:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 61.20pt 0.00pt 62.16pt; text-align:left; text-indent:-5.28pt;"><span class=font12 style=" line-height:11.04pt;">Это 1-октетное поле содержит беззнаковое целое число, указывающее тип сообщения NOTIFICATION: <u>Код    Название</u><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><u>Дополнительная информация</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><u>1</u>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <u>Message Header Error (ошибка в заголовке сообщения)</u><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><u>6.1 Обработка ошибок в заголовке.</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OPEN Message Error (ошибка сообщения OPEN)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>6.2 Обработка ошибок в сообщениях OPEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UPDATE Message Error (ошибка сообщения UPDATE)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>6.3   Обработка   ошибок   в   сообщениях</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 375.84pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">UPDATE.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:33.84pt;">
<div class=block style=" width:33.84pt; height:101.76pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:612.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Hold Timer Expired (закончилось время удержания)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>6.5 Обработка ошибок Hold Timer Expired.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Finite State Machine Error (ошибка машины конечных состояний)    6.6 Обработка ошибок машины конечных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 375.84pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">состояний.</span></div>
<div class=paragraph style=" padding:0.00pt 121.20pt 0.00pt 56.88pt; text-align:left; text-indent:5.28pt;"><span class=font12 style=" line-height:11.04pt;">6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Cease (разрыв соединения)<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>6.7 Разрыв соединения. <b><i>Error subcode </i></b>(субкод ошибки)<b><i>:</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это 1-октетное поле содержит беззнаковое целое число, которое предоставляет дополнительные сведения о природе</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">произошедшей ошибки. Каждое значение Error Code может быть связано с одним или несколькими значениями</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Error Subcode.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если не определено подходящего субкода, устанавливается Error Subcode = 0 (неуказанная ошибка).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Субкоды ошибок Message Header Error:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp; - Connection Not Synchronized - соединение не синхронизировано.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp; - Bad Message Length – некорректный размер сообщения.</span></div>
<div class=paragraph style=" padding:0.00pt 274.56pt 0.00pt 74.88pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">3&nbsp; - Bad Message Type – некорректный тип сообщения. Субкоды ошибок OPEN Message Error:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp; - Unsupported Version Number – неподдерживаемый номер версии.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp; - Bad Peer AS – некорректная AS партнера.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3&nbsp; - Bad BGP Identifier – некорректный идентификатор BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4&nbsp; - Unsupported Optional Parameter – неподдерживаемый дополнительный параметр.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">5&nbsp; - Authentication Failure – отказ при аутентификации.</span></div>
<div class=paragraph style=" padding:0.00pt 242.64pt 0.00pt 74.88pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">6&nbsp; - Unacceptable Hold Time – недопустимое время удержания. Субкоды ошибок UPDATE Message Error:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp;- Malformed Attribute List - некорректный список атрибутов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp;- Unrecognized Well-known Attribute – нераспознанный атрибут из числа хорошо известных.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3&nbsp;- Missing Well-known Attribute – отсутствует хорошо известный атрибут.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4&nbsp;- Attribute Flags Error – ошибка во флагах атрибута.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">5&nbsp;- Attribute Length Error – некорректный размер атрибута.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">6&nbsp;- Invalid ORIGIN Attribute – некорректный атрибут ORIGIN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">7&nbsp;- AS Routing Loop – петля в маршрутизации AS.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">8&nbsp;- Invalid NEXT_HOP Attribute – некорректный атрибут NEXT_HOP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">9&nbsp;- Optional Attribute Error- ошибка в дополнительном атрибуте.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">10&nbsp;- Invalid Network Field – некорректное поле сети.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">11&nbsp;- Malformed AS_PATH – некорректный формат AS_PATH.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Данные</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Это поле переменной длины служит для диагностики причин генерации сообщений NOTIFICATION. Содержимое поля данных зависит от значений полей Error Code и Error Subcode. Дополнительная информация приведена в главе 6. Обработка ошибок BGP.. Отметим, что размер поля данных может быть определен по приведенной ниже формуле:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font8><b>Message Length = 21 + Data Length</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>Минимальный размер сообщений NOTIFICATION составляет 21 октет (с учетом стандартного заголовка).</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b><i>5. Атрибуты пути</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этой главе рассматриваются атрибуты пути, используемые в сообщениях UPDATE. Атрибуты делятся на 4 категории:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1.&nbsp;Well-known mandatory – хорошо известные, обязательные.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2.&nbsp;Well-known discretionary – хорошо известные, необязательные.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3.&nbsp;Optional transitive – дополнительные, переходные.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4.&nbsp;Optional non-transitive – дополнительные, непереходные.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Хорошо известные атрибуты должны распознаваться всеми реализациями BGP. Некоторые из этих атрибутов являются обязательными и должны присутствовать в каждом сообщении UPDATE. Остальные атрибуты являются необязательными и могут отсутствовать в некоторых сообщениях UPDATE. Все хорошо известные атрибуты должны (после соответствующей обработки, если это нужно) передаваться другим узлам BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Кроме хорошо известных атрибутов каждый путь может содержать один или несколько дополнительных атрибутов. Поддержка дополнительных атрибутов не является обязательной для каждой реализации BGP. Обработка нераспознанных дополнительных атрибутов определяется установкой бита Transitive в октете флагов атрибута. Пути с нераспознанными переходными дополнительными атрибутами должны приниматься. Если путь с нераспознанными</span></div>
<div class=paragraph style=" padding:2.88pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:184.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:33.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">дополнительными переходными атрибутами принят и передается другим узлам BGP, нераспознанные атрибуты этого пути должны передаваться другим узлам BGP с установленным (1) битом Partial в поле Attribute Flags. Если путь с распознанным переходным атрибутом воспринят и передается другим узлам BGP, а бит Partial октета Attribute Flags имеет значение 1, установленное какой-либо из предыдущих AS, данная автономная система не должна сбрасывать этот бит в 0. Нераспознанные дополнительные непереходные атрибуты следует просто игнорировать, не передавая их другим узлам BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Новые дополнительные переходные атрибуты могут добавляться в путь исходным отправителем (originator) или любой AS в пути. Если эти атрибуты не добавляются исходным отправителем, устанавливается значение Partial = 1 в октете Attribute Flags. Правила присоединения новых непереходных дополнительных атрибутов будут зависеть от природы конкретного атрибута. Предполагается, что документация к каждому новому дополнительному непереходному атрибуту будет включать такие правила (описание атрибута MULTI_EXIT_DISC может служить примером). Все дополнительные атрибуты (переходные и непереходные) могут обновляться (если это допустимо) автономными системами в пути. Отправителю сообщения UPDATE следует размещать атрибуты пути в сообщениях UPDATE в порядке возрастания типа атрибутов. Получатель сообщения UPDATE должен быть готов к обработке атрибутов пути из сообщения с изменением их порядка. Один атрибут не может появляться более одного раза в поле Path Attributes конкретного сообщения UPDATE.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>5.1 Использование атрибута пути</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>Ниже описано использование каждого атрибута пути BGP.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.1&nbsp;ORIGIN</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Атрибут ORIGIN является хорошо известным и обязательным. Этот атрибут должен генерироваться автономной системой, которая является исходным отправителем маршрутной информации. Этот атрибут должен включаться в сообщения UPDATE всех узлов BGP, которые выбрали распространение этой информации другим узлам BGP.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.2&nbsp; &nbsp;AS_PATH</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">AS_PATH относится к хорошо известным обязательным атрибутам и служит для идентификации автономных систем,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">через которые передается информация в данном сообщении UPDATE. Компонентами списка являются поля AS_SET или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">AS_SEQUENCE.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Когда узел BGP распространяет маршрут, который был получен в сообщении UPDATE от другого узла BGP, ему следует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">изменить атрибут AS_PATH с учетом размещения узла BGP, которому передается маршрут:</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">a)&nbsp;Когда данный узел BGP анонсирует маршрут другому узлу BGP, расположенному в той же автономной системе, анонсирующему узлу не следует изменять связанный с этим маршрутом атрибут AS_PATH.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp; Когда данный узел BGP анонсирует маршрут узлу BGP, расположенному в соседней автономной системе, анонсирующему узлу следует изменить связанный с этим маршрутом атрибут AS_PATH как показано ниже:</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1)&nbsp;если первый сегмент AS_PATH имеет тип AS_SEQUENCE, локальной системе следует поместить свой номер AS как последний элемент списка (в крайнюю левую позицию).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 64.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2)&nbsp;если первый сегмент AS_PATH имеет тип AS_SET, локальной системе следует поместить новый сегмент типа AS_SEQUENCE в путь AS_PATH, включив свой номер AS в этот сегмент.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Когда узел BGP является источником маршрута:</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 47.52pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">a)&nbsp;исходному узлу следует включить свой номер AS в атрибут AS_PATH всех сообщений UPDATE, передаваемых узлам BGP в соседних автономных системах (в этом случае номер AS исходного отправителя будет единственным элементом атрибута AS_PATH).</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 47.52pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp;исходному узлу следует включить пустой атрибут AS_PATH во все сообщения UPDATE, передаваемые узлам BGP в своей автономной системе (пустой атрибут AS_PATH содержит нулевое значение в поле размера).</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.3&nbsp;NEXT_HOP</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Атрибут пути NEXT_HOP определяет IP-адрес граничного маршрутизатора, который следует использовать в качестве следующего пункта (next hop) на пути к адресату, указанному в сообщении UPDATE. Если граничный маршрутизатор находится в той же AS – это внутренний граничный маршрутизатор, в остальных случаях - внешний. Узел BGP может анонсировать любой внутренний граничный маршрутизатор как next hop, если интерфейс, связанный с IP-адресом этого граничного маршрутизатора (указывается в атрибуте NEXT_HOP), входит в подсеть, разделяемую локальным и удаленным узлами BGP. Узел BGP может анонсировать любой внешний граничный маршрутизатор как next hop, если IP-адрес этого маршрутизатора, полученный от партнера BGP, и интерфейс, связанный с IP-адресом данного граничного маршрутизатора (указан в атрибуте NEXT_HOP), разделяют общую подсеть с локальным и удаленным узлами BGP. Узел BGP должен обеспечивать возможность запрета анонсирования внешних граничных маршрутизаторов. Для узла BGP недопустимо анонсирование адреса партнера этому же партнеру в сообщении NEXT_HOP для маршрутов, по отношению к которым данный узел является исходным. Для узла BGP недопустимо устанавливать маршруты с собой в качестве next hop.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Когда узел BGP анонсирует маршрут другому узлу BGP, расположенному в той же автономной системе, анонсирующий узел не должен изменять атрибут NEXT_HOP, связанный с этим маршрутом. Когда узел BGP получает маршрут через внутреннее соединение, он может пересылать пакеты по адресу NEXT_HOP, если содержащийся в этом атрибуте адрес относится к той же подсети, в которой находятся локальный и удаленный узлы BGP.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.4&nbsp; &nbsp;MULTI_EXIT_DISC</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Атрибут MULTI_EXIT_DISC может использоваться на внешних (между AS) соединениях для избавления от многочисленных точек выхода или входа в одну соседнюю AS. Значение атрибута MULTI_EXIT_DISC является четырехоктетным беззнаковым целым числом, которое называют метрикой. При прочих равных из множества точек входа/выхода следует выбирать ту, которая имеет наименьшее значение метрики. Если сообщение получено через внешний канал, атрибут MULTI_EXIT_DISC может распространяться через внутренние соединения другим узлам BGP в той же AS. Атрибут MULTI_EXIT_DISC недопустимо распространять узлам BGP в соседних AS.</span></div>
<div class=paragraph style=" padding:11.76pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.5&nbsp; &nbsp;LOCAL_PREF</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Атрибут LOCAL_PREF относится к числу хорошо известных необязательных. Это атрибут следует включать во все сообщения UPDATE, которые данный узел BGP передает другим узлам BGP, расположенным в той же автономной системе. Узлу BGP следует рассчитать уровень предпочтения для каждого внешнего маршрута и указывать этот уровень при анонсировании маршрута внутренним партнерам. Предпочтение должно отдаваться маршрутам с более высоким уровнем. Узлу BGP следует использовать уровень предпочтения, определенный с помощью LOCAL_PREF, в процессе принятия решений о маршрутизации (см. параграф 9.1.1 Фаза 1 - расчет уровня предпочтения).</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Узлам BGP не следует включать этот атрибут в сообщения UPDATE, которые этот узел передает узлам BGP в соседних автономных системах. Если атрибут содержится в сообщении UPDATE, полученном от узла BGP, который находится в другой по отношению к принимающему узлу автономной системе, принимающему узлу следует игнорировать этот атрибут.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.6&nbsp; &nbsp;ATOMIC_AGGREGATE</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Хорошо известный атрибут ATOMIC_AGGREGATE относится к числу необязательных. Если узел BGP при наличии набора перекрывающихся маршрутов от одного из его партнеров (см. параграф. 9.1.4 Перекрывающиеся маршруты) выбирает менее специфический маршрут (без выбора более специфического), тогда локальной системе следует присоединить атрибут ATOMIC_AGGREGATE к маршруту, распространяемому этой системой другим узлам BGP (если этот атрибут уже не был установлен в принятом менее специфичном маршруте). Узлу BGP, получившему маршрут с атрибутом ATOMIC_AGGREGATE, не следует удалять этот атрибут при распространении маршрута другим узлам. Узлу BGP, получившему маршрут с атрибутом ATOMIC_AGGREGATE, не следует делать каких-либо NLRI этого маршрута более специфическими (см. определение в параграфе 9.1.4 Перекрывающиеся маршруты) при анонсировании этого маршрута другим узлам BGP. Узел BGP, получивший маршрут с атрибутом ATOMIC_AGGREGATE, должен знать реальный путь к адресату, как указано в поле NLRI маршрута, хотя при отсутствии петель возможна передача через AS, которые не указаны в атрибуте AS_PATH.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>5.1.7&nbsp; &nbsp;AGGREGATOR</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Атрибут AGGREGATOR является дополнительным переходным и может включаться в обновления, которые формируются при агрегировании (см. параграф 9.2.4.2 Агрегирование маршрутной информации). Узел BGP, объединяющий маршруты, может добавлять атрибут AGGREGATOR, содержащий номер AS и IP-адрес этого узла.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4 style=" line-height:11.28pt;"><b><i>6. Обработка ошибок BGP.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">В этой главе описаны операции обработки ошибок, которые обнаруживаются при обслуживании сообщений BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">При обнаружении любого из описанных здесь условий передается сообщение NOTIFICATION с соответствующими</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">значениями полей Error Code, Error Subcode, Data и соединение BGP разрывается. Если субкод ошибки не задан, следует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">устанавливать Error Subcode = 0.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фраза &quot;соединение BGP разрывается&quot; означает, что закрывается соединение транспортного уровня и освобождаются все</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">ресурсы, выделенные для соединения BGP. Записи таблицы маршрутизации, связанные с удаленным партнером,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">помечаются как некорректные, а информация об этом передается другим партнерам BGP до того, как маршруты будут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">удалены из системы.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если явно не указано иное, поле Data (данные) сообщений NOTIFICATION, передаваемых для индикации ошибки,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">остается пустым.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4 style=" line-height:11.04pt;"><b>6.1&nbsp;Обработка ошибок в заголовке.</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При обнаружении какой-либо ошибки в процессе обработки заголовка передается сообщение NOTIFICATION с Error</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Code = Message Header Error. Поле Error Subcode показывает конкретную причину ошибки.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Предполагается, что поле Marker в заголовке сообщений типа OPEN содержит только единицы. Ожидаемое значение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">поля Marker для остальных типов сообщений BGP определяется на основе присутствия дополнительного параметра</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Authentication  Information  в  сообщении  BGP  OPEN  и  используемого  механизма  аутентификации  (если  поле</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Authentication Information присутствует в сообщении BGP OPEN). Если значение поля Marker в заголовке сообщения не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">совпадает с ожидаемым, происходит ошибка синхронизации и устанавливается значение Error Subcode = Connection Not</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Synchronized.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если значение поля Length в заголовке сообщения меньше 19 или больше 4096, поле Length в заголовке сообщения</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">OPEN, NOTIFICATION или UPDATE меньше минимального размера сообщения OPEN/NOTIFICATION/UPDATE или</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">поле Length в заголовке сообщения KEEPALIVE не равно 19, устанавливается значение Error Subcode = Bad Message</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Length. Поле данных содержит ошибочное значение поля Length.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если поле Type в заголовке сообщения не удается распознать, устанавливается Error Subcode = Bad Message Type и поле</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">данных содержит ошибочное значение поля Type.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4 style=" line-height:11.04pt;"><b>6.2&nbsp;Обработка ошибок в сообщениях OPEN.</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При обнаружении какой-либо ошибки в процессе обработки сообщений OPEN генерируется сообщение NOTIFICATION</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">с Error Code = OPEN Message Error. Поле Error Subcode показывает конкретную причину ошибки.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если версия, указанная в поле Version полученного сообщения OPEN не поддерживается, устанавливается значение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Error Subcode = Unsupported Version Number. Поле данных содержит 2-октетное беззнаковое целое, которое показывает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">максимальный номер локально поддерживаемой версии BGP (который меньше номера версии, указанного в принятом</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">сообщении OPEN).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если поле Autonomous System в сообщении OPEN содержит неприемлемое значение, устанавливается Error Subcode =</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Bad Peer AS. Определение приемлемости номеров AS выходит за пределы рассмотрения этого документа.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если неприемлемо значение поля Hold Time в сообщении OPEN, в поле Error Subcode <b>должно </b>быть установлено</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">значение Unacceptable Hold Time. Реализации протокола <b>должны </b>отвергать значения Hold Time 1 или 2 секунды.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Протокол <b>может </b>отвергать любые значения Hold Time. Реализация протокола, принимающая значение Hold Time,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>должна </b>использовать согласованное значение Hold Time.</span></div>
<div class=paragraph style=" padding:7.20pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если поле BGP Identifier в сообщении OPEN синтаксически некорректно, устанавливается значение Error Subcode = Bad BGP Identifier. Синтаксическая корректность означает, что поле BGP Identifier содержит корректный IP-адрес хоста. Если  один  из  дополнительных  параметров  (Optional  Parameter)  в  сообщении  OPEN  не  удалось  распознать, устанавливается значение Error Subcode = Unsupported Optional Parameters.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если сообщение OPEN содержит данные для аутентификации (как Optional Parameter), включается соответствующая процедура аутентификации. Если процедура аутентификации (на основе Authentication Code и Authentication Data) дает отказ, устанавливается значение Error Subcode = Authentication Failure.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>6.3&nbsp;Обработка ошибок в сообщениях UPDATE.</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При  обнаружении  какой-либо  ошибки  в   процессе  обработки  сообщений  UPDATE  генерируется  сообщение NOTIFICATION с Error Code = UPDATE Message Error. Поле Error Subcode показывает конкретную причину ошибки. Контроль ошибок в сообщении UPDATE начинается с проверки атрибутов пути. Если значение Unfeasible Routes Length или Total Attribute Length слишком велико (т. е., Unfeasible Routes Length + Total Attribute Length + 23 превышает размер сообщения - Length), устанавливается значение Error Subcode = Malformed Attribute List.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если любой из распознанных атрибутов имеет значение Attribute Flags, конфликтующее с Attribute Type Code, устанавливается значение Error Subcode = Attribute Flags Error. Поле данных содержит ошибочный атрибут (тип, размер и значение).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если любой из распознанных атрибутов имеет значение Attribute Length, не соответствующее ожидаемой длине (на основе кода типа атрибута), устанавливается значение Error Subcode = Attribute Length Error. Поле данных содержит ошибочный атрибут (тип, размер и значение).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если отсутствует какой-либо из обязательных хорошо известных атрибутов, устанавливается значение Error Subcode = Missing Well-known Attribute. Поле данных содержит значение Attribute Type Code для отсутствующего атрибута. Если не распознан какой-либо из обязательных хорошо известных атрибутов, устанавливается значение Error Subcode = Unrecognized Well-known Attribute. Поле данных содержит нераспознанный атрибут (тип, размер и значение). Если атрибут ORIGIN имеет неопределенное значение, устанавливается Error Subcode = Invalid Origin Attribute. Поле данных содержит нераспознанный атрибут (тип, размер и значение).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если атрибут NEXT_HOP синтаксически некорректен, устанавливается Error Subcode = Invalid NEXT_HOP Attribute. Поле данных содержит некорректный атрибут (тип, размер и значение). Синтаксическая корректность означает, что атрибут NEXT_HOP представляет корректный IP-адрес хоста. Семантическая корректность применима только к внешним соединениям BGP. Это означает, что интерфейс, связанный с IP-адресом, который указан атрибутом NEXT_HOP, относится к той же подсети, в которой находится принимающий узел BGP, но его адрес не совпадает с IP-адресом принимающего узла BGP. Если атрибут NEXT_HOP семантически некорректен, ошибка должна протоколироваться и маршрут следует игнорировать (в этом случае сообщение NOTIFICATION не передается). Проверяется семантическая корректность атрибута AS_PATH. Если путь семантически некорректен, устанавливается значение Error Subcode = Malformed AS_PATH.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если дополнительный атрибут распознан, проверяется значение этого атрибута. При обнаружении ошибки атрибут отбрасывается и устанавливается значение Error Subcode = Optional Attribute Error. Поле данных содержит ошибочный атрибут (тип, размер и значение).</span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если какой-либо из атрибутов появляется в сообщении UPDATE более одного раза, устанавливается значение Error Subcode = Malformed Attribute List.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Проверяется семантическая корректность поля NLRI в сообщении UPDATE. При обнаружении ошибки устанавливается значение Error Subcode = Invalid Network Field.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>6.4&nbsp;Обработка ошибок в сообщениях NOTIFICATION.</b></span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если узел передает сообщение NOTIFICATION и при этом возникает ошибка, не существует способа уведомить об этой ошибке путем передачи последующего сообщения NOTIFICATION. Все ошибки такого типа (нераспознанное значение Error Code или Error Subcode) должны протоколироваться и передаваться администратору узла, отправившего ошибочное сообщение. Способы такого протоколирования и уведомления не рассматриваются в данном документе.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>6.5&nbsp;Обработка ошибок Hold Timer Expired.</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если система не получает сообщений KEEPALIVE и/или UPDATE и/или NOTIFICATION в течение периода, заданного полем Hold Time в сообщении OPEN, передается сообщение NOTIFICATION с кодом ошибки Hold Timer Expired и соединение BGP закрывается.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>6.6&nbsp;Обработка ошибок машины конечных состояний.</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Любая ошибка, обнаруженная машиной конечных состояний (Finite State Machine - FSM) BGP (например, неожиданное событие), приводит к генерации сообщения NOTIFICATION с Error Code = Finite State Machine Error.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>6.7&nbsp;Разрыв соединения.</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">При отсутствии каких-либо фатальных ошибок из числа описанных выше узел BGP может в любой момент закрыть соединение BGP, передав партнеру сообщение NOTIFICATION с Error Code = Cease. Однако такие сообщения не должны использоваться при возникновении какой-либо из перечисленных выше фатальных ошибок.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font4><b>6.8&nbsp;Обнаружение конфликтов при соединении.</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если пара узлов BGP пытается одновременно организовать соединение TCP друг с другом, между узлами такой пары могут возникнуть два параллельных соединения. Будем называть такую ситуацию конфликтом при соединении. Очевидно, что при возникновении такого конфликта одно из соединений должно быть закрыто.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Выбор одного из пары соединений для закрытия базируется на соглашении об идентификаторах BGP. При возникновении конфликта сравниваются значения BGP Identifier вовлеченных в конфликт узлов и сохраняется только то соединение, которое было инициировано узлом BGP с большим значением BGP Identifier.</span></div>
<div class=paragraph style=" padding:20.16pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:740.16pt;">
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">При получении сообщения OPEN локальная система <b>должна </b>проверить все свои соединения, находящиеся в состоянии OpenConfirm. Узел BGP может также проверить соединения, которые находятся в состоянии OpenSent, если он имеет информацию о значении BGP Identifier узла на противоположной стороне соединения (эта информация получается с помощью других протоколов). Если какое-либо из этих соединений относится к удаленному узлу BGP, идентификатор которого совпадает со значением BGP Identifier в сообщении OPEN, локальные система выполняет следующие процедуры разрешения конфликта:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Значение BGP Identifier локальной системы сравнивается с идентификатором удаленного узла BGP, указанным в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">сообщении OPEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если локальное значение BGP Identifier меньше удаленного, локальная система закрывает существующее</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">соединение BGP (оно находится в состоянии OpenConfirm) и принимает соединение, инициированное удаленным</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">узлом BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если идентификатор BGP локальной системы больше удаленного идентификатора, закрывается новое соединение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">(связанное с  принятым  сообщением OPEN)  и  продолжается  использование существующего (в  состоянии</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">OpenConfirm). При сравнении идентификаторов BGP их значения трактуются как беззнаковые целые числа (4 октета). Если одно из участвующих в конфликте соединений BGP находится в состоянии Established, такой конфликт разрешается безусловным закрытием нового соединения. Отметим, что конфликты с соединениями, находящимися в состоянии Idle, Connect или Active обнаружить невозможно.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Закрытие соединения BGP в результате процедуры разрешения конфликта сопровождается передачей сообщений NOTIFICATION с Error Code = Cease.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font5><b><i>7.&nbsp;Согласование версий BGP.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Узлы BGP могут согласовать версию протокола путем повторных попыток организации соединения BGP, используя в первой попытке высший номер, поддерживаемый локальной стороной. Если при попытке организации соединения возникает ошибка с Error Code = OPEN Message Error и Error Subcode = Unsupported Version Number, узел BGP имеет информацию о номере версии, который был использован при неудачной попытке, номере версии, которую пытался использовать партнер, номере версии, переданном партнером в сообщении NOTIFICATION, и номере версии, которую он поддерживает. Если номера одной или более версий из числа поддерживаемых обоими партнерами совпадают, имеющаяся информация позволяет быстро определить максимальный поддерживаемый номер версии. Для поддержки согласования версии BGP в будущих версиях протокола должен сохраняться формат сообщений OPEN и NOTIFICATION.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font5><b><i>8.&nbsp;Машина конечных состояний BGP.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этой главе рассматривается работа BGP в терминах машины конечных состояний (Finite State Machine или FSM).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Ниже приведено краткое описание и обзор состояний BGP, определенных FSM. Краткое описание BGP FSM дано в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Приложении 1.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Изначально BGP находится в состоянии Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Состояние Idle</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">В этом состоянии BGP отвергает все входящие соединения BGP. Для партнера не выделяется никаких ресурсов. В ответ на событие Start (инициируется системой или оператором) локальная система инициализирует все ресурсы BGP, запускает таймер ConnectRetry, инициирует транспортное соединение с другим узлом BGP, начинает прослушивание входящих соединений от удаленных узлов BGP и переходит в состояние Connect. Значение таймера ConnectRetry определяется локальными условиями, но должно быть достаточно велико для того, чтобы обеспечить инициализацию TCP.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если узел BGP обнаруживает ошибку, он закрывает соединение и переходит в состояние Idle. Выход из состояния Idle требует генерации нового события Start. Если эти события генерируются автоматически, возникновение ошибки BGP может привести к автогенерации попыток выхода из состояния Idle (flapping) на узле. Во избежание таких ситуаций рекомендуется генерировать события Start с некоторой задержкой после перехода узла в состояние Idle в результате ошибки. Для узла, перешедшего в состояние Idle в результате ошибки, интервал между генерацией последовательных событий Start (если они генерируются автоматически) должен возрастать экспоненциально. Начальная задержка должна составлять 60 секунд и после каждой попытки пауза должна удваиваться. Все остальные события в состоянии Idle игнорируются.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Состояние Connect</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этом состоянии BGP ожидает завершения процесса организации транспортного соединения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При успешном соединении на транспортном уровне локальная система сбрасывает таймер ConnectRetry, завершает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">инициализацию, передает партнеру сообщение OPEN и переходит в состояние OpenSent.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При отказе в соединении (например, тайм-аут повторной передачи), локальная система заново запускает таймер</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">ConnectRetry, продолжает прослушивать попытки организации соединений от удаленных узлов BGP и переходит в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">состояние Active.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В случае завершения отсчета таймера ConnectRetry локальная система запускает его заново, инициирует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">транспортное соединение с другим узлом BGP, продолжая прослушивать вызовы от удаленных узлов BGP, и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">остается в состоянии Connect.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">События Start игнорируются в состоянии Connect<sup>3</sup>.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на все прочие события (инициируемые системой или оператором) локальная система освобождает все</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">ресурсы BGP, связанные с этим соединением и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Состояние Active</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этом состоянии BGP пытается приобрести партнера, инициируя транспортное соединение.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:35.04pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font11><sup>3</sup> В исходном документе ошибочно указано состояние Active. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>11&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При успешном соединении локальная система сбрасывает таймер ConnectRetry, завершает инициализацию, передает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">партнеру сообщение OPEN, устанавливает для Hold Timer достаточно большое значение и переходит в состояние</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">OpenSent. Рекомендуется устанавливать для таймера удержания значение Hold Timer = 4 минуты.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При завершении отсчета таймера ConnectRetry локальная система запускает этот таймер снова, инициирует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">транспортное соединение с другим узлом BGP, продолжая прослушивать входящие соединения от удаленных узлов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">BGP, и переходит в состояние Connect.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если локальная система обнаруживает попытки удаленного узла BGP связаться с ней и IP-адрес удаленного узла не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">совпадает с ожидаемым, локальная система заново запускает таймер ConnectRetry, отвергает попытку соединения,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">продолжая прослушивать попытки соединений от удаленных узлов BGP и сохраняя состояние Active.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">События Start игнорируются в состоянии Active.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на все прочие события (инициируемые системой или оператором) локальная система освобождает все</span></div>
<div class=paragraph style=" padding:0.00pt 233.52pt 0.00pt 28.32pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">ресурсы BGP, связанные с этим соединением и переходит в состояние Idle. <b><i>Состояние OpenSent</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этом состоянии BGP ждет сообщения OPEN от своего партнера. При получении сообщения OPEN проверяется</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">корректность всех полей этого сообщения. Если при проверке заголовка или содержимого сообщения OPEN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">обнаруживаются ошибки (см. параграф 6.2 Обработка ошибок в сообщениях OPEN.) или возникает конфликт при</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">организации соединения (см. параграф 6.8 Обнаружение конфликтов при соединении.), локальная система передает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">сообщение NOTIFICATION и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если в сообщении OPEN не обнаружено ошибок, узел BGP передает сообщение KEEPALIVE и устанавливает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">таймер KeepAlive. Для таймера Hold Timer, значение которого изначально устанавливается достаточно большим (см.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">выше), выбирается согласованное значение (см. параграф 4.2 Формат сообщений OPEN). Если согласовано нулевое</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">значение Hold Time, таймеры Hold Time и KeepAlive не используются. Если значение поля Autonomous System</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">совпадает с номером локальной AS, соединение является внутренним, в остальных случаях соединение является</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">внешним (это будет влиять на обработку сообщений UPDATE, описанную ниже). После этого состояние меняется на</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">OpenConfirm.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если приходит уведомление о разрыве соединения от нижележащего протокола транспортного уровня, локальная</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">система закрывает соединение BGP, заново запускает таймер ConnectRetry, продолжая слушать попытки соединений</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">от удаленных узлов BGP, и переходит в состояние Active.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">По истечении времени Hold Timer локальная система передает сообщение NOTIFICATION с кодом ошибки Hold</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Timer Expired и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на событие Stop (инициируется системой или оператором) локальная система передает сообщение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION с Error Code = Cease и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">События Start игнорируются в состоянии OpenSent.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на все остальные события локальная система передает сообщение NOTIFICATION с Error Code = Finite State</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Machine Error и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Всякий раз, когда BGP переходит из состояния OpenSent в состояние Idle, закрывается соединение BGP (и</span></div>
<div class=paragraph style=" padding:0.00pt 172.80pt 0.00pt 28.32pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">транспортное соединение) и освобождаются все ресурсы, связанные с этим соединением. <b><i>Состояние OpenConfirm</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этом состоянии BGP ожидает сообщений KEEPALIVE или NOTIFICATION.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Получив сообщение KEEPALIVE, система переходит в состояние Established.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">По истечении времени Hold Timer до прихода сообщения KEEPALIVE, локальная система передает сообщение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION с кодом ошибки Hold Timer Expired и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Получив сообщение NOTIFICATION, система переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">По истечении времени KeepAlive локальная система передает сообщение KEEPALIVE и заново запускает таймер</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">KeepAlive.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При получении от транспортного протокола уведомления о разрыве соединения локальная система переходит в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на событие Stop (инициируется системой или оператором) локальная система передает сообщение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION с Error Code = Cease и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">События Start игнорируются в состоянии OpenConfirm.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на все остальные события локальная система передает сообщение NOTIFICATION с Error Code = Finite State</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Machine Error и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Всякий раз, когда BGP переходит из состояния OpenConfirm в состояние Idle, закрывается соединение BGP (и</span></div>
<div class=paragraph style=" padding:0.00pt 172.80pt 0.00pt 28.32pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">транспортное соединение) и освобождаются все ресурсы, связанные с этим соединением. <b><i>Состояние Established</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В состоянии Established узел BGP может обмениваться со своим партнером сообщениями UPDATE, NOTIFICATION</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">и KEEPALIVE.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если локальная система получает сообщение UPDATE или KEEPALIVE, она заново запускает таймер Hold Timer</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">(если согласованное значение Hold Time не равно нулю).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Получив сообщение NOTIFICATION, система переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если локальная система получает сообщение UPDATE и процедура обработки ошибок в сообщениях UPDATE (см.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">параграф 6.3 Обработка ошибок в сообщениях UPDATE.) обнаруживает ошибку, локальная система передает</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">сообщение NOTIFICATION и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">При получении от нижележащего транспортного протокола уведомления о разрыве соединения локальная система</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">По истечении времени Hold Timer до прихода сообщения KEEPALIVE, локальная система передает сообщение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION с кодом ошибки Hold Timer Expired и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">По истечении времени KeepAlive локальная система передает сообщение KEEPALIVE и заново запускает таймер</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">KeepAlive.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Передав сообщение KEEPALIVE или UPDATE, локальная система заново запускает таймер KeepAlive, если</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">согласованное значение Hold Time не равно нулю.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:794.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на событие Stop (инициируется системой или оператором) локальная система передает сообщение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION с Error Code = Cease и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">События Start игнорируются в состоянии Established.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В ответ на все остальные события локальная система передает сообщение NOTIFICATION с Error Code = Finite State</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Machine Error и переходит в состояние Idle.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Всякий раз, когда BGP переходит из состояния Established в состояние Idle, закрывается соединение BGP (и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">транспортное соединение) и освобождаются все ресурсы, связанные с этим соединением.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 57.60pt; text-align:left;"><span class=font5><b><i>9. Обработка сообщений UPDATE</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Сообщение UPDATE может быть получено только в состоянии Established. При получении сообщения UPDATE проверяется корректность каждого поля в соответствии с параграфом 6.3 Обработка ошибок в сообщениях UPDATE.. Если не удается распознать дополнительные непереходные атрибуты, они просто игнорируются. Если не удается распознать дополнительные переходные атрибуты, устанавливается значение Partial=1 в поле флагов атрибута (третий по старшинству бит) и атрибут сохраняется для передачи другим узлам BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если все дополнительные атрибуты распознаны и имеют корректные значения, тогда (в зависимости от типа дополнительного атрибута) атрибуты обрабатываются локально, сохраняются и обновляются (при необходимости) для последующей передачи другим узлам BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если   сообщение   UPDATE   содержит   непустое   поле   WITHDRAWN   ROUTES   (отзываемые   маршруты),   ранее анонсированные маршруты, чьи адресаты указаны префиксами в данном поле, удаляются из таблицы Adj-RIB-In Узлу BGP следует запустить Decision Process, поскольку анонсированные ранее маршруты больше не являются доступными. Если сообщение UPDATE содержит доступный маршрут, это маршрут следует поместить в таблицу Adj-RIB-In и выполнить по отношению к нему перечисленные ниже операции:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если поле NLRI идентично одному из маршрутов, хранящихся в Adj-RIB-In, новый маршрут должен использоваться</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">взамен имеющегося в таблице Adj-RIB-In (т.е., старый маршрут отзывается). Узел BGP должен запустить Decision</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Process, поскольку старый маршруты больше не может использоваться.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если новый маршрут перекрывается с маршрутом, включенным ранее (см. 9.1.4 Перекрывающиеся маршруты) в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">таблицу Adj-RIB-In, узел BGP должен запустить Decision Process, поскольку более специфичный маршрут, явно</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">указанный, как часть менее специфичного, недоступен для использования.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если атрибуты пути нового маршрута идентичны атрибутам пути маршрута, содержащегося в Adj-RIB-In, и новый</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">маршрут более специфичен (см. 9.1.4 Перекрывающиеся маршруты), чем старый маршрут, выполнять какие-либо</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">специальные действия не требуется.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если значение NLRI нового маршрута не присутствует ни в одном из имеющихся в таблице Adj-RIB-In маршрутов,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">этот маршрут просто добавляется в таблицу Adj-RIB-In и узел BGP должен запустить Decision Process.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если новый маршрут перекрывается с более специфичным маршрутом (см. 9.1.4 Перекрывающиеся маршруты),</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">указанным в таблице Adj-RIB-In, узел BGP должен запустить Decision Process для множества адресатов, связанных с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">менее специфичным маршрутом.</span></div>
<div class=paragraph style=" padding:7.44pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font4 style=" line-height:11.28pt;"><b>9.1 Процесс принятия решений</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Процесс принятия решений (Decision Process) обеспечивает выбор маршрутов для последующего анонсирования путем</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">применения правил, заданных в локальной базе PIB (Policy Information Base), к маршрутам из таблицы Adj-RIB-In</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Результатом процесса является набор маршрутов, которые будут анонсироваться всем партнерам - эти маршруты</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">хранятся в таблице Adj-RIB-Out.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Процесс выбора формализуется путем определения функций, принимающих атрибуты данного маршрута в качестве</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">аргументов и возвращающих неотрицательное целое число, которое задает уровень предпочтения для данного маршрута.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Функция, вычисляющая уровень предпочтения для данного маршрута, не должна использовать в качестве входных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">данных  сведений  о  наличии  или  отсутствии других  маршрутов  и  атрибутах пути  других  маршрутов.  После</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">использования этой функции для всех маршрутов выбор пути сводится к сравнению уровней предпочтения и выбору</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">максимального значения.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Процесс выбора применяется ко всем маршрутам из таблицы Adj-RIB-In и отвечает за:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Выбор маршрутов, анонсируемых узлам BGP в локальной AS;</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Выбор маршрутов, анонсируемых узлам BGP в соседних AS;</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Агрегирование маршрутов и снижение объема маршрутных данных.</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Decision Process делится на три фазы, каждая из которых включается определенными событиями:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 1 отвечает за расчет уровня предпочтения для каждого маршрута, полученного от узла BGP, расположенного в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">соседней AS, и анонсирование узлам BGP в локальной AS маршрутов с максимальным уровнем предпочтения для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">каждого из адресатов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 2 начинается по завершении фазы 1 и отвечает за выбор лучшего маршрута из числа доступных для каждого</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">адресата, а также включение выбранных маршрутов в подходящие Loc-RIB.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 3 начинается после обновления Loc-RIB и отвечает за распространение маршрутов из Loc-RIB всем партнерам,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">расположенным в соседних AS, в соответствии с политикой, содержащейся в PIB. На этой фазе также может</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">выполняться объединение маршрутов и снижение объема маршрутной информации.</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 57.60pt; text-align:left;"><span class=font4 style=" letter-spacing:-0.70pt;"><b><i>9.1.1 Фаза 1 - расчет уровня предпочтения</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фазу 1 следует активизировать всякий раз, когда локальный узел BGP получает сообщение UPDATE от партнера, расположенного в соседней AS, которое анонсирует новый маршрут или замену/отзыв существующего маршрута. Фаза 1 представляет собой автономный процесс, который завершается после выполнения всех требуемых операций. Функция, используемая в фазе 1, должна заблокировать таблицу Adj-RIB-In прежде, чем начать работу с содержащимися в ней маршрутами и снять блокировку по завершении расчетов.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">При получении нового маршрута или замене доступного локальный узел BGP должен определять уровень предпочтения для полученного маршрута. Если маршрут получен от узла BGP в локальной AS, в качестве уровня предпочтения следует брать значение атрибута LOCALPREF или рассчитывать этот уровень на основе конфигурационных параметров</span></div>
<div class=paragraph style=" padding:6.48pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>13</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.72pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.72pt;">
<div class=block style=" width:138.72pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:2.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:795.60pt;">
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">политики. Если маршрут получен от узла BGP в соседней AS, уровень предпочтения следует рассчитывать на основе конфигурационных параметров политики. Метод определения уровня предпочтения задается локальными условиями. Локальному узлу следует запустить внутренний процесс обновления (см. 9.2.1 Внутренние обновления) для выбора и анонсирования маршрута с высшим уровнем предпочтения.</span></div>
<div class=paragraph style=" padding:5.76pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font3><b><i>9.1.2&nbsp;Фаза 2 - выбор маршрута</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 2 выполняется после завершения фазы 1 и представляет собой независимый процесс, который завершается после</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">выполнения всех необходимых операций. В фазе 2 используются все маршруты из таблицы Adj-RIBs-In, включая</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">маршруты, полученные от узлов BGP в локальной AS и соседних автономных системах.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 2 не должна начинаться, пока не будет завершено принятие решения для фазы 3. Фаза 2 должна блокировать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">таблицу Adj-RIBs-In перед началом работы и снимать блокировку по завершении работы.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если атрибут NEXTHOP маршрута BGP указывает адрес, к которому локальный узел BGP не имеет маршрута в таблице</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Loc-RIB, этот маршрут BGP <b>следует </b>исключать из обработки в фазе 2.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Для каждого набора адресатов, к которому существует доступный маршрут в таблице Adj-RIBs-In, локальный узел BGP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">должен убедиться, что выполняется хотя бы одно из перечисленных ниже условий:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">a)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">маршрут имеет высший уровень предпочтения из всего набора путей к этому адресату;</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp;маршрут является единственным для данного адресата;</span></div>
<div class=paragraph style=" padding:0.00pt 57.60pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">c)&nbsp;маршрут выбран в результате применения в фазе 2 правил &laquo;разрыва связей&raquo; (tie breaking) описанных ниже (9.1.2.1 Разрыв связей (фаза 2).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">После этого локальному узлу <b>следует </b>поместить маршрут в таблицу Loc-RIB, заменяя все маршруты к тому же адресату, которые будут обнаружены в Loc-RIB. Локальный узел <b>должен </b>определить следующий маршрутизатор (immediate next hop) для адреса, указанного атрибутом NEXTHOP выбранного маршрута, запрашивая IGP и выбирая один из возможных путей в IGP. Адрес этого маршрутизатора <b>должен </b>использоваться при включении выбранного маршрута в таблицу Loc-RIB. Если маршрут к адресу, указанному атрибутом NEXTHOP, меняется так, что изменяется адрес next hop, требуется повторить описанную выше процедуру выбора маршрута. Недоступные маршруты должны удаляться из таблицы Loc-RIB и Adj-RIBs-In</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.1.2.1 Разрыв связей (фаза 2)</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.08pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">В таблице Adj-RIBs-In узла BGP может храниться несколько маршрутов к одному адресату, имеющих одинаковый уровень предпочтения. Локальный узел может выбрать только один из таких маршрутов для включения в таблицу Loc-RIB. В рассмотрение принимаются все маршруты с одинаковым уровнем предпочтения - как полученные от узлов BGP в соседних AS, так и принятые от узлов той же автономной системы.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">В описанной ниже процедуре разрыва связей предполагается, что для каждого маршрута-кандидата все узлы BGP в автономной системе могут определить стоимость пути (внутренняя дистанция) до адреса, указанного атрибутом NEXTHOP в данном маршруте. Разрыв связей выполняется по следующему алгоритму:</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.56pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">a)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.05pt;">Если локальная система принимает во внимание атрибут MULTIEXITDISC и маршруты-кандидаты отличаются </span><span style=" letter-spacing:0.00pt;">значениями этого атрибута, следует выбирать маршрут с минимальным значением MULTIEXITDISC.</span></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 46.08pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp; В противном случае выбирается маршрут с минимальной стоимостью (внутренней дистанцией) до элемента, указанного атрибутом NEXTHOP. Если стоимость нескольких маршрутов совпадает, процедура продолжается следующим образом:</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 64.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp; </b>если хотя бы один из таких маршрутов анонсирован узлом BGP в соседней AS, среди таких маршрутов выбирается путь, анонсированный узлом с наименьшим значением BGP Identifier из числа находящихся в соседней AS;</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 64.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>в противном случае выбирается маршрут, анонсированный узлом с минимальным значением BGP Identifier.</span></div>
<div class=paragraph style=" padding:7.68pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>9.1.3&nbsp; &nbsp;Фаза 3 - распространение информации о маршруте</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 3 выполняется после завершения фазы 2 или при возникновении одного из следующих событий:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">a)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">изменение маршрутов к локальным адресатам в таблице Loc-RIB;</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp;информация об изменении локально сгенерированных маршрутов получена с помощью внешнего BGP;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">c)&nbsp;организовано новое соединение между парой узлов BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Фаза 3 представляет собой самостоятельный процесс, завершающийся после выполнения требуемых операций. Функция Routing Decision фазы 3 должна быть заблокирована, пока не завершится принятие решения в фазе 2. Все маршруты из таблицы Loc-RIB должны быть обработаны и включены в соответствующие записи связанной таблицы Adj-RIBs-Out. Возможно использование методов агрегирования маршрутов и снижения объема маршрутных данных (см. 9.2.4.1 Снижение объема информации).</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.08pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Для поддержки будущих вариантов использования групповой адресации между AS узлам BGP, принимающим участие в multicast-маршрутизации между AS, следует анонсировать маршруты, полученные от одного из своих внешних партнеров и, если такой маршрут включен в таблицу Loc-RIB данного узла, анонсировать его также партнеру, от которого маршрут получен. Для узлов BGP, не принимающих участия в multicast-маршрутизации между AS, такое анонсирование является необязательным. При передаче таких анонсов атрибут NEXTHOP должен содержать адрес партнера. Реализация протокола может также оптимизировать рассылку таких анонсов, отсекая часть информации в атрибуте AS_PATH и оставляя только номер своей AS и партнера, которому анонсируется маршрут (при этом следует устанавливать для атрибута ORIGIN значение INCOMPLETE). Кроме того, не требуется передавать дополнительные и необязательные атрибуты пути в таких анонсах.</span></div>
<div class=paragraph style=" padding:0.00pt 56.88pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">По завершении обновлений таблиц Adj-RIBs-Out и FIB (Forwarding Information Base - база рассылки информации) локальному узлу BGP следует активизировать процесс внешнего обновления 9.2.2.</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 29.04pt; text-align:left;"><span class=font3><b><i>9.1.4&nbsp;Перекрывающиеся маршруты</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Узел BGP может передавать маршруты с перекрывающимися NLRI другому узлу BGP. Перекрытие NLRI происходит в тех случаях, когда множество адресатов отображается в несоответствующее множество маршрутов. Поскольку BGP представляет NLRI с использованием префиксов IP, перекрытия всегда могут быть выражены как подмножества. Маршрут,   описывающий  более  узкое   множество   адресатов   (более   длинный  префикс)   будем   называть   более</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>14</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:22.08pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:794.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;">специфичным по сравнению с маршрутом, описывающим более широкое множество адресатов (префикс короче), - такие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;">маршруты будем называть менее специфичными.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;">Отношения предпочтительности позволяют разделить менее специфичный маршрут на 2 части:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;"><b>&#9830;&nbsp;</b>множество адресатов, описываемое менее специфичным маршрутом, и</span></div>
<div class=paragraph style=" padding:0.72pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>множество адресатов, описываемое перекрытием менее специфичного и более специфичного маршрутов.</span></div>
<div class=paragraph style=" padding:0.48pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Когда перекрывающиеся маршруты присутствуют в одной таблице Adj-RIB-In, более специфичные маршруты должны</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">следовать перед менее специфичными.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Набор адресатов, описываемый перекрытием, представляет часть менее специфичного маршрута, которая доступна, но</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">не используется. Если более специфичный маршрут перестает работать, описываемые перекрытием адресаты остаются</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">доступными через менее специфичный маршрут.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Если узел BGP получает перекрывающиеся маршруты, процессу выбора маршрутов (Decision Process) следует</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">принимать во внимание семантику перекрывающихся маршрутов. В частности, если узел BGP воспринимает менее</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">специфичный маршрут и отклоняет более специфичный от того же узла, адресаты, представленные перекрытием, могут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">не пересылаться в AS, указанные атрибутом AS_PATH такого маршрута. Следовательно, узел BGP может выбирать</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">следующие варианты:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">a)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">установить оба маршрута;</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.64pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp;установить только более специфичный маршрут;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">c)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">установить только неперекрывающуюся часть менее специфичного маршрута (т. е., деагрегировать его)</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">d)&nbsp;объединить два маршрута и установить агрегированный маршрут;</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">e)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">установить только менее специфичный маршрут;</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">f)&nbsp;не устанавливать ни один из маршрутов.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если узел BGP выбирает вариант e), он должен добавить в маршрут атрибут ATOMIC_AGGREGATE (маршрут с таким атрибутом не может быть деагрегирован, т. е., значение NLRI такого маршрута не может быть более специфичным). Пересылка по такому маршруту не гарантирует, что пакеты IP будут на самом деле проходить только через те AS, которые указаны в атрибуте ASPATH этого маршрута. Если узел BGP выбирает вариант a), он не должен анонсировать более общий маршрут без более специфичного.</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font4><b>9.2 Процесс передачи обновлений</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Процесс передачи обновлений (Update-Send) отвечает за анонсирование сообщений UPDATE всем партнерам. Например, он распространяет маршруты, выбранные Decision Process, другим узлам BGP, которые могут располагаться в той же или соседних AS. Правила для обмена информацией между узлами BGP, расположенными в различных AS, приводятся в параграфе 9.2.2, а правила обмена информацией внутри автономной системы - в параграфе 9.2.1. Распространение маршрутных данных между узлами BGP в одной AS будем называть внутренним распределением.</span></div>
<div class=paragraph style=" padding:6.72pt 0.00pt 0.00pt 57.60pt; text-align:left;"><span class=font2><b><i>9.2.1 Внутренние обновления</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Процесс  внутреннего  обновления  обеспечивает распространение  маршрутной  информации между узлами BGP,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">расположенными в локальной AS.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Когда узел BGP получает сообщение UPDATE от другого узла BGP, расположенного в той же AS, принимающий узел не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">должен перераспределять информацию, содержащуюся в сообщении UPDATE другим узлам BGP той же AS.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Когда узел BGP получает новый маршрут от узла BGP из соседней AS, он должен анонсировать этот маршрут всем</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">другим узлам BGP в своей AS путем рассылки сообщений UPDATE, если справедливо любое из условий:</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 75.12pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.80pt;">1)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">уровень предпочтения полученного локальным узлом BGP нового маршрута выше уровня, присвоенного другому </span><span style=" letter-spacing:0.00pt;">маршруту, который был получен от узла BGP в соседней AS</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2)&nbsp;нет других маршрутов, полученных от узлов BGP в соседних AS</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 75.12pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.45pt;">3)<span style=" letter-spacing:0.00pt;">&nbsp; полученный недавно маршрут выбран в результате разрыва связи между несколькими маршрутами, которые </span><span style=" letter-spacing:-0.10pt;">имели высший уровень предпочтения и вели к тому же адресату (см. параграф 9.2.1.1).</span></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Когда узел BGP получает сообщение UPDATE с непустым полем WITHDRAWN ROUTES, он должен удалить из таблицы Adj-RIB-In все маршруты к адресатам, указанным этим полем (как префикс IP). Кроме того, узел должен выполнить следующие операции:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 76.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.80pt;">1)<span style=" letter-spacing:0.00pt;">&nbsp;</span><span style=" letter-spacing:-0.10pt;">если соответствующий доступный маршрут не был ранее анонсирован, дополнительных действий не требуется;</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2)&nbsp;если соответствующий доступный маршрут был анонсирован, нужно выполнить следующее:</span></div>
<div class=paragraph style=" padding:0.00pt 28.56pt 0.00pt 89.76pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">i. если выбранный для анонсирования новый маршрут имеет такое же значение NLRI, как недоступные маршруты, локальный узел BGP должен анонсировать замену маршрута;</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 89.76pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">ii. если взятый на замену маршрут невозможно анонсировать, узел BGP должен включить адресатов недоступного маршрута (префикс IP) в поле WITHDRAWN ROUTES сообщения UPDATE и разослать это сообщение каждому партнеру, которому ранее была анонсирована доступность соответствующего маршрута.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Все возможные маршруты, которые анонсируются, должны быть помещены в таблицу Adj-RIBs-Out, а все недоступные</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">маршруты следует удалить из Adj-RIBs-Out.</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.2.1.1 Разорванные связи (внутренние обновления)</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если локальный узел BGP имеет соединения с несколькими узлами BGP в соседних AS, это ведет к существованию множества таблиц Adj-RIBs-In, связанных с этими партнерами. Таблицы Adj-RIBs-In могут содержать несколько маршрутов к одному адресату и с одинаковым уровнем предпочтения, которые были анонсированы узлами BGP из соседних AS. Локальный узел BGP должен выбирать один из таких маршрутов, пользуясь приведенными правилами:</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 75.12pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">a)<span style=" letter-spacing:0.00pt;">&nbsp; Если маршруты-кандидаты отличаются только атрибутами NEXTHOP и MULTIEXITDISC, а локальная </span><span style=" letter-spacing:-0.05pt;">система принимает во внимание атрибут MULTIEXITDISC, следует выбирать маршрут с минимальным значением </span><span style=" letter-spacing:0.00pt;">атрибута MULTIEXITDISC.</span></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 74.64pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp; Если локальная система может установить стоимость пути к объекту, указанному атрибутом NEXTHOP маршрута-кандидата, следует выбирать маршрут с минимальной стоимостью.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt; letter-spacing:-0.40pt;">c)<span style=" letter-spacing:0.00pt;">&nbsp; Во всех остальных случаях следует выбирать маршрут, анонсированный узлом BGP с наименьшим значением BGP Identifier.</span></span></div>
<div class=paragraph style=" padding:12.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>15</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.00pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:800.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>9.2.2&nbsp;Внешние обновления</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Процесс внешнего обновления включает рассылку маршрутной информации узлам BGP, расположенным в соседних AS. В фазе 3 процесса выбора маршрутов узел BGP обновляет Adj-RIBs-Out и свою таблицу рассылки (Forwarding Table). Все новые маршруты и маршруты, недавно ставшие недоступными, для которых нет замены, должны анонсироваться узлам BGP, расположенным в соседних AS, с помощью сообщений UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Все маршруты из таблицы Loc-RIB, помеченные как недоступные, должны быть удалены. Изменения в доступных адресатах своей AS также должны анонсироваться с помощью сообщений UPDATE.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.04pt;"><b><i>9.2.3&nbsp;Управление объемом служебного трафика</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Протокол BGP вынужден ограничивать объем служебного трафика (сообщения UPDATE) в целях снижения расхода полосы каналов, требуемой для анонсирования, и ресурсов системы, требуемых на этапе принятия решения (Decision Process) для обработки информации, содержащейся в сообщениях UPDATE.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.2.3.1&nbsp;Частота анонсирования маршрутов</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Параметр MinRouteAdvertisementInterval определяет минимальное время, которое должно пройти между анонсированием маршрутов для конкретного адресата от одного узла BGP. Процедура ограничения скорости рассылки применяется независимо для каждого адресата, хотя значение MinRouteAdvertisementInterval устанавливается для узла BGP в целом.</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Два сообщения UPDATE, передаваемые одним узлом BGP, когда он анонсирует возможные маршруты к некоторому общему набору адресатов, полученные от узлов BGP в соседних AS, должны быть разделены промежутком времени не менее MinRouteAdvertisementInterval. Очевидно, что для достижения в точности такого поведения требуется использовать отдельный таймер для каждого общего набора адресатов. Такой подход будет порождать недопустимую нагрузку (overhead). На практике подходит любой метод, обеспечивающий между двумя последовательными сообщениями UPDATE с анонсом доступного маршрута к некому множеству адресатов в соседние AS от одного узла BGP интервал не менее MinRouteAdvertisementInterval и способный гарантировать постоянное значение верхней границы для такого интервала.</span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Поскольку внутри AS требуется быстрое схождение маршрутов, эта процедура не применяется для маршрутов, полученных от внутренних узлов BGP. Чтобы избавиться от длительных &laquo;черных дыр&raquo;, процедура не применяется при явном отзыве недоступных маршрутов (для которых адресат, указанный префиксом IP, включен в поле WITHDRAWN ROUTES сообщения UPDATE).</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Эта процедура не ограничивает скорость выбора маршрута, внося лишь ограничение на частоту анонсирования. Если новый маршрут выбран несколько раз в течение ожидания MinRouteAdvertisementInterval, по завершении периода MinRouteAdvertisementInterval должен анонсироваться последний выбранный маршрут.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.2.3.2&nbsp;Частота обновления из исходной AS</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Параметр MinASOriginationInterval определяет минимальный интервал времени между последовательными сообщениями UPDATE, которые содержат информацию об изменениях внутри AS анонсирующего узла BGP.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.2.3.3&nbsp;Флуктуации</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Для снижения вероятности пиковой нагрузки при распределении сообщений BGP данным узлом BGP таймеры, связанные с MinASOriginationInterval, Keepalive и MinRouteAdvertisementInterval должны задаваться с использованием флуктуаций (jitter). Каждый узел BGP должен использовать одинаковое отклонение для всех перечисленных таймеров, независимо от адресатов, для которых будут передаваться сообщения (т. е., флуктуации задаются на уровне узла). Величина флуктуации должна определяться умножением базовой величины на случайное значение от 0,75 до 1,0 (с равномерным распределением).</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font3 style=" line-height:11.28pt;"><b><i>9.2.4&nbsp;Эффективная организация маршрутных данных</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.28pt;">После выбора маршрутных данных для анонсирования узел BGP может использовать несколько методов эффективной организации этих данных.</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.2.4.1&nbsp;Снижение объема информации</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Снижение объема информации означает снижение уровня гранулярности контроля над политикой маршрутизации – после сжатия информации одни и те же правила будут применяться ко всем адресатам и путям одного класса. Перечисленные способы позволяют снизить объем данных, помещаемых в Adj-RIBs-Out на этапе Decision Process:</span></div>
<div class=paragraph style=" padding:0.00pt 56.40pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">a)&nbsp;<b>NLRI</b>. IP-адреса получателей могут быть представлены префиксами IP. В тех случаях, когда имеется соответствие между структурой адреса и системами, находящимися под управлением администратора AS, можно уменьшить размер NLRI, передаваемых в сообщениях UPDATE.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp; <b>AS_PATH</b>. Информация о пути AS может быть представлена как в упорядоченной (AS_SEQUENCE), так и в неупорядоченной (AS_SET) форме. AS_SET используется в алгоритме агрегирования маршрутов, описанном в параграфе 9.2.4.2. Это позволяет снизить объем данных AS_PATH за счет однократного указания номера каждой AS (независимо от числа ее упоминаний во множестве объединяемых AS_PATH).</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 46.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">AS_SET означает, что адресаты, указанные в NLRI, могут быть достигнуты по пути, проходящему по крайней мере через некоторые из составляющих AS. AS_SET обеспечивают достаточную информацию для предотвращения петель в передаче маршрутных данных, однако могут теряться потенциально возможные пути, поскольку они больше не указываются явно в форме AS_SEQUENCE. На практике это не вызывает проблем, поскольку по прибытии одного пакета IP на край группы AS узел BGP в этой точке явно будет иметь более детальную информацию о пути и сможет различать отдельные маршруты к адресатам.</span></div>
<div class=paragraph style=" padding:3.84pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font1 style=" line-height:11.04pt;"><b>9.2.4.2&nbsp;Агрегирование маршрутной информации</b></span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Агрегирование представляет собой процесс объединения характеристик нескольких разных маршрутов таким образом, чтобы их можно было анонсировать как единый маршрут. Агрегирование может выполняться как часть процесса принятия решения для снижения объема маршрутных данных, помещаемых в Adj-RIBs-Out.</span></div>
<div class=paragraph style=" padding:16.08pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="3" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:794.88pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Агрегирование снижает объем информации, которую узел BGP должен сохранять и рассылать другим узлам BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Маршруты можно агрегировать путем применения описанной ниже процедуры раздельно к однотипным атрибутам пути</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">и <span style=" font-variant: small-caps;">NLRI.</span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Маршруты с атрибутами MULTIEXITDISC и NEXTHOP не могут агрегироваться, если значения этих атрибутов не</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">совпадают для всех маршрутов.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Атрибуты пути  с  различными  кодами типа  не  могут  быть  агрегированы.   Однотипные  атрибуты пути  могут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 57.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">агрегироваться в соответствии с приведенными ниже правилами:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.40pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Атрибут  ORIGIN.  </i></b>Если хотя бы один из агрегируемых маршрутов имеет ORIGIN = INCOMPLETE, для</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">объединенного маршрута также должно устанавливаться ORIGIN = INCOMPLETE.  Если хотя бы один из</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">объединяемых маршрутов имеет значение ORIGIN = EGP, агрегированный маршрут также должен иметь значение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">EGP для этого атрибута.  В  остальных случаях для агрегированного маршрута устанавливается ORIGIN =</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">INTERNAL.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.40pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Атрибут AS_PATH. </i></b>Если у агрегируемых маршрутов совпадают значения AS_PATH, объединенный маршрут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">имеет такое же значение ASPATH.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В целях объединения атрибутов AS_PATH будем моделировать каждую AS в атрибуте AS_PATH как пару &lt;type,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">value&gt;, где type определяет тип сегмента пути, к которому относится AS (например, AS_SEQUENCE, AS_SET), а</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">value указывает номер AS. Если агрегируемые маршруты имеют разные атрибуты AS_PATH, агрегированный</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">атрибут ASPATH должен удовлетворять каждому из перечисленных ниже требований:</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 90.96pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Все пары типа AS_SEQUENCE объединенного атрибута AS_PATH должны присутствовать в каждом атрибуте AS_PATH исходного набора агрегируемых маршрутов.</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 90.96pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Все пары типа AS SET объединенного атрибута AS PATH должны присутствовать хотя бы в одном атрибуте AS_PATH исходного набора (как AS_SET или AS_SEQUENCE).</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 90.96pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp; &nbsp;</b>Для любой пары X типа AS_SEQUENCE в агрегированном AS_PATH, которая предшествует паре Y агрегированного AS_PATH, X предшествует Y в каждом атрибуте AS_PATH исходного набора, который содержит Y (независимо от типа Y).</span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 76.08pt; text-align:left; text-indent:14.88pt;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Ни одна пара (независимо от ее типа) не должна появляться в агрегированном ASPATH более одного раза. Разработчики могут выбирать любой алгоритм, который обеспечивает соответствие приведенным правилам. Соответствующая требованиям этого документа реализация должна выполнять по крайней мере описанный ниже алгоритм для выполнения приведенных требований:</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 90.48pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp;</b>Определить наиболее длинную последовательность лидирующих пар (как описано выше), присутствующую в атрибутах AS_PATH всех объединяемых маршрутов и сделать ее лидирующей в объединенном атрибуте AS_PATH.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 90.48pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp; &nbsp;</b>Установить для оставшихся пар из атрибутов AS_PATH объединяемых маршрутов тип AS_SET и присоединить их к агрегированному атрибуту ASPATH.</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 90.48pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;"><b>&#9830;&nbsp; </b>Если объединенный атрибут AS_PATH содержит несколько одинаковых пар (независимо от типа), лишние (все, кроме одной) пары типа AS_SET следует удалить из объединенного атрибута AS_PATH.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 76.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В Приложении 6 (параграф 6.8) рассмотрен другой алгоритм, удовлетворяющий приведенным здесь требованиям и</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 76.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">обеспечивающим поддержку более сложных вариантов политики.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Атрибут   ATOMIC_AGGREGATE.    </i></b>Если   хотя   бы   один   из   объединяемых   маршрутов   имеет   атрибут</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 76.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">ATOMIC_AGGREGATE, объединенный маршрут также должен иметь этот атрибут.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b><i>Атрибут AGGREGATOR</i></b><i>. </i>Все атрибуты AGGREGATOR в объединяемых маршрутах следует игнорировать.</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font5 style=" letter-spacing:-1.05pt;"><b>9.3</b><span style=" letter-spacing:0.00pt;"><b>&nbsp;</b></span><span style=" letter-spacing:-0.80pt;"><b>Критерии выбора маршрута</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.28pt;">В общем случае рассмотрение дополнительных правил сравнения альтернативных маршрутов выходит за пределы данного документа. Однако имеются два исключения:</span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Если локальная AS присутствует в пути AS нового маршрута, этот маршрут не может считаться лучше какого-либо из имеющихся путей. Нарушение этого правила ведет к возникновению маршрутных петель.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Для обеспечения эффективной распределенной обработки следует выбирать только маршруты, представляющиеся стабильными. Таким образом, AS должна избегать применения нестабильных маршрутов и не должна вносить скороспелых спонтанных изменений при выборе путей. Трактовка слов &laquo;нестабильный&raquo; и &laquo;скороспелый&raquo; в предыдущем предложении требует некоторого опыта, но, в принципе, достаточно понятна.</span></div>
<div class=paragraph style=" padding:4.80pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font5 style=" letter-spacing:-0.90pt;"><b>9.4</b><span style=" letter-spacing:0.00pt;"><b>&nbsp;</b></span><span style=" letter-spacing:-0.80pt;"><b>Порождение маршрутов BGP</b></span></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:10.80pt;">Узел BGP может порождать (originate) маршруты BGP, помещая информацию, полученную из других источников (например, IGP), в BGP. Порождающий маршруты узел BGP должен указывать для таких маршрутов уровень предпочтения, используя для этого Decision Process (см. 9.1 Процесс принятия решений). Эти маршруты могут также рассылаться другим узлам BGP в локальной AS, как часть процесса внутреннего обновления (см. 9.2.1 Внутренние обновления). Решение о целесообразности рассылки полученной от других источников информации внутри AS с использованием BGP зависит от используемой в AS среды (например, типа IGP) и должно задаваться на уровне конфигурации.</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 57.36pt; text-align:left;"><span class=font5><b><i>Приложение 1. Переходы и действия BGP FSM.</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В этом приложении рассматриваются переходы между состояниями BGP FSM, вызванные событиями BGP. Ниже приведен список таких состояний и событий для тех случаев, когда согласованное значение Hold Time отличается от нуля. <b><i>Состояния BGP</i></b><i>:</i></span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 76.08pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp;- Idle - бездействие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp;- Connect - соединение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.36pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3&nbsp;- Active - активно</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 75.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4&nbsp;- OpenSent - передано сообщение OPEN</span></div>
<div class=paragraph style=" padding:12.24pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>17</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:153.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:200.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">5&nbsp;– OpenConfirm – подтверждено сообщение OPEN</span></div>
<div class=paragraph style=" padding:0.00pt 371.52pt 0.00pt 28.32pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">6&nbsp;– Established – соединение организовано <b><i>События BGP</i></b>:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1&nbsp;- BGP Start – начало работы</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2&nbsp;- BGP Stop - остановка</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">3&nbsp;- BGP Transport connection open – транспортное соединение открыто</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4&nbsp;- BGP Transport connection closed – транспортное соединение закрыто</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">5&nbsp;- BGP Transport connection open failed – неудачная попытка открыть транспортное соединение</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">6&nbsp;- BGP Transport fatal error – неисправимая ошибка на транспортном уровне</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">7&nbsp;- ConnectRetry timer expired – завершен отсчет таймера ConnectRetry</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">8&nbsp;- Hold Timer expired – завершен отсчет таймера Hold Timer</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">9&nbsp;- KeepAlive timer expired – завершен отсчет таймера KeepAlive</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">10&nbsp;- Receive OPEN message – получено сообщение OPEN</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">11&nbsp;- Receive KEEPALIVE message – получено сообщение KEEPALIVE</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">12&nbsp;- Receive UPDATE messages – получено сообщение UPDATE</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.32pt; text-align:left; text-indent:18.00pt;"><span class=font12 style=" line-height:11.04pt;">13&nbsp;- Receive NOTIFICATION message – получено сообщение NOTIFICATION В приведенной ниже таблице перечислены состояния и переходы BGP FSM, а также указаны действия в результате таких переходов.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:586.32pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt;">
<div class=block style=" width:302.64pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:153.60pt;">
<div class=block style=" width:153.60pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>18</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:138.72pt;">
<div class=block style=" width:138.72pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 4.08pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.64pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.64pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:153.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:61.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:19.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:11.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:22.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:101.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:30.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:8.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:3.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:116.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:20.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:48.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:24.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="15" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" rowspan="3" valign="top" style=" width:260.40pt;">
<div class=block style=" width:260.40pt; height:12.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell colspan="7" valign="top" style=" width:334.56pt;">
<div class=block style=" width:334.56pt; height:11.28pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 116.40pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:154.08pt;">
<div class=block style=" width:154.08pt; height:1.68pt;">
</div>
</td>
<td class=cell rowspan="3" valign="top" style=" width:48.48pt;">
<div class=block style=" width:48.48pt; height:67.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 16.32pt; text-align:left; text-indent:-16.32pt;"><span class=font12 style=" line-height:22.56pt;"><u>Сообщение </u>Нет</span></div>
<div class=paragraph style=" padding:15.60pt 0.00pt 0.00pt 16.32pt; text-align:left;"><span class=font12>Нет</span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:132.00pt;">
<div class=block style=" width:132.00pt; height:1.44pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:0.24pt;">
</td>
<td class=cell colspan="2" rowspan="2" valign="top" style=" width:132.00pt;">
<div class=block style=" width:132.00pt; height:66.48pt;">
<div class=paragraph style=" padding:0.00pt 35.52pt 0.00pt 58.08pt; text-align:left; text-indent:-33.12pt;"><span class=font12 style=" line-height:22.56pt;"><u>Следующий этап </u>2</span></div>
<div class=paragraph style=" padding:15.60pt 0.00pt 0.00pt 58.08pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.24pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="10" rowspan="2" valign="top" style=" width:397.20pt;">
<div class=block style=" width:340.56pt; height:91.20pt; padding:0.00pt 0.00pt 0.00pt 56.64pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:340.56pt; height:91.20pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:286.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt;">
<div class=block style=" width:54.00pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.24pt 0.00pt 0.00pt; text-align:center;"><span class=font12>Событие</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:286.56pt;">
<div class=block style=" width:286.56pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.48pt 0.00pt 0.00pt; text-align:center;"><span class=font12>Действия</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt;">
<div class=block style=" width:54.00pt; height:44.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.52pt; text-align:left;"><span class=font12><b>Idle (1)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.48pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:286.56pt;">
<div class=block style=" width:286.56pt; height:44.64pt;">
<div class=paragraph style=" padding:10.56pt 99.36pt 0.00pt 5.04pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Инициализация ресурсов Запуск таймера ConnectRetry Инициирование транспортного соединения</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt;">
<div class=block style=" width:54.00pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.24pt 0.00pt 0.00pt; text-align:center;"><span class=font12>прочие</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:286.56pt;">
<div class=block style=" width:286.56pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 5.04pt; text-align:left;"><span class=font12>Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt;">
<div class=block style=" width:54.00pt; height:24.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.00pt; text-align:left;"><span class=font12><b>Connect(2)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.68pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:286.56pt;">
<div class=block style=" width:286.56pt; height:24.72pt;">
<div class=paragraph style=" padding:10.32pt 0.00pt 0.00pt 5.04pt; text-align:left;"><span class=font12>Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:286.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:17.28pt;">
<div class=block style=" width:17.28pt; height:66.24pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:24.96pt;">
</td>
<td class=cell colspan="5" rowspan="10" valign="top" style=" width:197.76pt;">
<div class=block style=" width:169.68pt; height:249.60pt; padding:0.00pt 28.08pt 0.00pt 0.00pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:170.16pt; height:249.60pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:70.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:45.12pt;">
<div class=paragraph style=" padding:10.56pt 44.64pt 0.00pt 29.28pt; text-align:left; text-indent:4.80pt;"><span class=font12 style=" line-height:11.28pt;">Нет OPEN</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:45.12pt;">
<div class=paragraph style=" padding:11.28pt 41.28pt 0.00pt 24.96pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">2 4</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 34.08pt; text-align:left;"><span class=font12>Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.20pt; text-align:left;"><span class=font12>3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:28.56pt;">
<div class=paragraph style=" padding:0.00pt 49.68pt 0.00pt 34.08pt; text-align:right;"><span class=font12 style=" line-height:11.52pt;">Нет Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:28.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.96pt; text-align:left;"><span class=font12>2</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12>1<b>________</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:39.60pt;">
<div class=paragraph style=" padding:4.56pt 44.64pt 0.00pt 29.28pt; text-align:left; text-indent:4.80pt;"><span class=font12 style=" line-height:11.28pt;">Нет OPEN</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:39.60pt;">
<div class=paragraph style=" padding:5.76pt 41.28pt 0.00pt 24.96pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">2 4</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:17.04pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:17.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.20pt; text-align:left;"><span class=font12>3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:17.04pt;">
<div class=paragraph style=" padding:4.56pt 0.00pt 0.00pt 34.08pt; text-align:left;"><span class=font12>Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:17.04pt;">
<div class=paragraph style=" padding:5.76pt 0.00pt 0.00pt 24.96pt; text-align:left;"><span class=font12>2</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 34.08pt; text-align:left;"><span class=font12>Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:39.36pt;">
<div class=paragraph style=" padding:10.56pt 49.68pt 0.00pt 34.08pt; text-align:right;"><span class=font12 style=" line-height:11.52pt;">Нет Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:39.36pt;">
<div class=paragraph style=" padding:11.28pt 0.00pt 0.00pt 24.96pt; text-align:left;"><span class=font12>4</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.20pt; text-align:left;"><span class=font12>3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt;">
<div class=block style=" width:99.60pt; height:40.32pt;">
<div class=paragraph style=" padding:4.56pt 49.68pt 0.00pt 0.00pt; text-align:right;"><span class=font12 style=" line-height:11.04pt;">Нет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 15.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">KEEPALIVE</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 7.20pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.56pt;">
<div class=block style=" width:70.56pt; height:40.32pt;">
<div class=paragraph style=" padding:5.52pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1</span></div>
<div class=paragraph style=" padding:0.24pt 41.52pt 0.00pt 25.20pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">5 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:70.56pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:24.96pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:22.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.60pt; text-align:left;"><span class=font12>3</span></div>
</div>
</td>
<td class=cell colspan="2" rowspan="3" valign="top" style=" width:132.72pt;">
<div class=block style=" width:132.72pt; height:32.40pt;">
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.04pt;">Полная инициализация <u>Сброс таймера ConnectRetry </u>Перезапуск таймера ConnectRet</span></div>
</div>
</td>
<td class=cell colspan="4" rowspan="3" valign="top" style=" width:148.80pt;">
<div class=block style=" width:148.80pt; height:32.40pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:7.92pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.60pt; text-align:left;"><span class=font12>5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:1.92pt;">
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:69.60pt;">
<div class=paragraph style=" padding:0.00pt 17.28pt 0.00pt 68.64pt; text-align:left; text-indent:12.48pt;"><span class=font12 style=" line-height:11.28pt;">7 прочие</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>Active (3)</b></span></div>
<div class=paragraph style=" padding:0.00pt 29.52pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">1 2</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:1.92pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:281.52pt;">
<div class=block style=" width:281.52pt; height:67.68pt;">
<div class=paragraph style=" padding:0.00pt 140.40pt 0.00pt 0.00pt; text-align:left;"><span class=font12 style=" line-height:11.52pt;">Перезапуск таймера ConnectRetry Освобождение ресурсов</span></div>
<div class=paragraph style=" padding:9.60pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Нет</span></div>
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.04pt;">Полная инициализация</span></div>
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.04pt;"><u>Сброс таймера ConnectRetry</u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:24.48pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.60pt; text-align:left;"><span class=font12>5</span></div>
</div>
</td>
<td class=cell colspan="3" rowspan="3" valign="top" style=" width:141.12pt;">
<div class=block style=" width:141.12pt; height:34.32pt;">
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.28pt;">Разрыв соединения</span></div>
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.28pt;">Перезапуск таймера ConnectRetry</span></div>
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.28pt;"><u>Перезапуск таймера ConnectRetry</u></span></div>
</div>
</td>
<td class=cell colspan="3" rowspan="3" valign="top" style=" width:140.40pt;">
<div class=block style=" width:140.40pt; height:34.32pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:8.16pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.36pt; text-align:left;"><span class=font12>7</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="10" valign="top" style=" width:397.20pt;">
<div class=block style=" width:397.20pt; height:88.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 68.64pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><u>прочие      Освобождение ресурсов</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>OpenSent(4)</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Нет</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">4<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Разрыв транспортного соединения</span></div>
<div class=paragraph style=" padding:0.00pt 140.40pt 0.00pt 81.12pt; text-align:left; text-indent:34.56pt;"><span class=font12 style=" line-height:11.04pt;">Перезапуск таймера ConnectRetry 6<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Освобождение ресурсов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 78.72pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">10<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Обработка сообщения OPEN завершена успешно</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 115.68pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><u>Неудача при обработке сообщения OPEN</u></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="8" rowspan="3" valign="top" style=" width:260.40pt;">
<div class=block style=" width:260.40pt; height:35.76pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 115.68pt; text-align:left; text-indent:-47.04pt;"><span class=font12 style=" line-height:11.28pt;">прочие      Разрыв транспортного соединения Освобождение ресурсов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b><u>OpenConfirm (5)</u></b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:136.80pt;">
<div class=block style=" width:136.80pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="6" valign="top" style=" width:227.52pt;">
<div class=block style=" width:227.52pt; height:32.40pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 143.52pt; text-align:left;"><span class=font12>NOTIFICATION</span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:107.04pt;">
<div class=block style=" width:107.04pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 34.32pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:136.80pt;">
<div class=block style=" width:136.80pt; height:1.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:90.72pt;">
<div class=block style=" width:90.72pt; height:71.52pt;">
<div class=paragraph style=" padding:0.00pt 22.32pt 0.00pt 14.64pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><u>Нет </u>Нет Нет <u>KEEPALIVE </u>Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:69.84pt;">
</td>
<td class=cell colspan="10" rowspan="3" valign="top" style=" width:397.20pt;">
<div class=block style=" width:397.20pt; height:123.12pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><u>I</u>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <u>Нет</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">4<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Освобождение ресурсов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">6<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Освобождение ресурсов</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 81.12pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><u>9</u><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><u>Перезапуск таймера KeepAlive</u></span></div>
<div class=paragraph style=" padding:0.00pt 148.80pt 0.00pt 115.68pt; text-align:left; text-indent:-36.96pt;"><span class=font12 style=" line-height:11.28pt;">II&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Полная инициализация Перезапуск таймера Hold Timer</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 78.72pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">13<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Разрыв транспортного соединения</span></div>
<div class=paragraph style=" padding:0.00pt 136.80pt 0.00pt 68.40pt; text-align:center;"><span class=font12 style=" line-height:11.28pt;">Освобождение ресурсов прочие      Разрыв транспортного соединения <u>Освобождение ресурсов</u></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 62.16pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b><u>Established (6)</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:107.04pt;">
<div class=block style=" width:107.04pt; height:89.04pt;">
<div class=paragraph style=" padding:67.20pt 0.00pt 0.00pt 34.32pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:69.84pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:19.20pt;">
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:90.72pt;">
<div class=block style=" width:90.72pt; height:53.28pt;">
<div class=paragraph style=" padding:19.20pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font12>NOTIFICATION</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:19.20pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.04pt;">
<div class=block style=" width:107.04pt; height:34.08pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 34.32pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:81.12pt;">
<div class=block style=" width:81.12pt; height:34.08pt;">
</div>
</td>
<td class=cell colspan="3" valign="top" style=" width:136.32pt;">
<div class=block style=" width:136.32pt; height:34.08pt;">
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.28pt;">1<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Нет</span></div>
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.28pt;">4<span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>Освобождение ресурсов</span></div>
<div class=paragraph style=" text-align:left;"><span class=font12 style=" line-height:11.28pt;"><u>6</u><span class=font1>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><u>Освобождение ресурсов</u></span></div>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:159.36pt;">
<div class=block style=" width:159.36pt; height:34.08pt;">
</div>
</td>
<td class=cell colspan="6" rowspan="3" valign="top" style=" width:218.16pt;">
<div class=block style=" width:170.16pt; height:89.76pt; padding:1.68pt 28.08pt 10.80pt 19.92pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:170.16pt; height:89.76pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:70.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.84pt;">
<div class=block style=" width:99.84pt; height:33.36pt;">
<div class=paragraph style=" padding:0.00pt 49.92pt 0.00pt 34.08pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Нет Нет Нет</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.32pt;">
<div class=block style=" width:70.32pt; height:33.36pt;">
<div class=paragraph style=" padding:0.00pt 41.28pt 0.00pt 25.44pt; text-align:left; text-indent:-0.72pt;"><span class=font12 style=" line-height:11.28pt;">6 1 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.84pt;">
<div class=block style=" width:99.84pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 15.12pt; text-align:left;"><span class=font12>KEEPALIVE</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.32pt;">
<div class=block style=" width:70.32pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 24.72pt; text-align:left;"><span class=font12>6</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.84pt;">
<div class=block style=" width:99.84pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 15.84pt 0.00pt 0.00pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;">KEEPALIVE</span></div>
<div class=paragraph style=" padding:0.00pt 15.84pt 0.00pt 0.00pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;">UPDATE</span></div>
<div class=paragraph style=" padding:0.00pt 15.84pt 0.00pt 0.00pt; text-align:center;"><span class=font12 style=" line-height:11.04pt;">NOTIFICATION</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.32pt;">
<div class=block style=" width:70.32pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 41.28pt 0.00pt 25.44pt; text-align:left; text-indent:-0.72pt;"><span class=font12 style=" line-height:11.04pt;">6 1 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.84pt;">
<div class=block style=" width:99.84pt; height:11.04pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:70.32pt;">
<div class=block style=" width:70.32pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.68pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:99.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:70.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:81.12pt;">
<div class=block style=" width:81.12pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:11.76pt;">
<div class=block style=" width:11.76pt; height:1.68pt;">
</div>
</td>
<td class=cell colspan="6" valign="top" style=" width:283.92pt;">
<div class=block style=" width:283.92pt; height:1.68pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt; height:66.48pt;">
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:115.68pt;">
<div class=block style=" width:115.68pt; height:79.44pt;">
<div class=paragraph style=" padding:0.00pt 26.88pt 0.00pt 78.72pt; text-align:justify; text-indent:2.40pt;"><span class=font12 style=" line-height:11.28pt;"><u>9 </u>11 12</span></div>
<div class=paragraph style=" padding:9.60pt 0.00pt 0.00pt 78.72pt; text-align:left;"><span class=font12>13</span></div>
<div class=paragraph style=" padding:9.60pt 0.00pt 0.00pt 68.64pt; text-align:left;"><span class=font12>прочие</span></div>
</div>
</td>
<td class=cell colspan="5" rowspan="2" valign="top" style=" width:261.12pt;">
<div class=block style=" width:261.12pt; height:79.44pt;">
<div class=paragraph style=" padding:0.00pt 42.72pt 0.00pt 0.00pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><u>Перезапуск таймера KeepAlive </u>Перезапуск таймера Hold Timer Обработка сообщения UPDATE завершена успешно <u>Неудача при обработке сообщения UPDATE </u>Разрыв транспортного соединения Освобождение ресурсов Разрыв транспортного соединения </span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt; height:66.48pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:20.40pt;">
<div class=block style=" width:20.40pt; height:12.96pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell colspan="4" rowspan="2" valign="top" style=" width:90.72pt;">
<div class=block style=" width:90.72pt; height:35.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 6.72pt; text-align:left;"><span class=font12>NOTIFICATION</span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:107.04pt;">
<div class=block style=" width:107.04pt; height:35.28pt;">
<div class=paragraph style=" padding:0.96pt 0.00pt 0.00pt 34.32pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:81.12pt;">
<div class=block style=" width:81.12pt; height:22.32pt;">
<div class=paragraph style=" padding:9.60pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12>Ниже</span></div>
</div>
</td>
<td class=cell colspan="8" valign="top" style=" width:316.08pt;">
<div class=block style=" width:316.08pt; height:22.32pt;">
<div class=paragraph style=" padding:0.00pt 66.96pt 0.00pt 11.76pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Освобождение ресурсов иведен сжатый вариант таблицы состояний и переходов.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:61.20pt;">
<div class=block style=" width:61.20pt; height:67.20pt;">
</div>
</td>
<td class=cell colspan="14" valign="top" style=" width:533.76pt;">
<div class=block style=" width:492.48pt; height:67.20pt; padding:0.00pt 41.28pt 0.00pt 0.00pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:492.48pt; height:67.20pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:62.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:73.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:79.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:50.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt;">
<div class=block style=" width:54.24pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 15.84pt 0.00pt 0.96pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">События 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:62.88pt;">
<div class=block style=" width:62.88pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 17.04pt 0.00pt 16.56pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Idle (1) 2</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 13.44pt 0.00pt 17.28pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Connect (2) 2</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:73.92pt;">
<div class=block style=" width:73.92pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 15.12pt 0.00pt 36.72pt; text-align:left; text-indent:-18.24pt;"><span class=font12 style=" line-height:11.28pt;">Active (3) 3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:79.44pt;">
<div class=block style=" width:79.44pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 10.80pt 0.00pt 14.40pt; text-align:center;"><span class=font12 style=" line-height:16.08pt;">OpenSent (4) <span class=font13>4</span></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:93.12pt;">
<div class=block style=" width:93.12pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 0.48pt 0.00pt 0.00pt; text-align:center;"><span class=font12>OpenConfirm (5)</span></div>
<div class=paragraph style=" padding:0.00pt 2.88pt 0.00pt 0.00pt; text-align:center;"><span class=font14>5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:50.16pt;">
<div class=block style=" width:50.16pt; height:22.08pt;">
<div class=paragraph style=" padding:0.00pt 1.68pt 0.00pt 29.52pt; text-align:left; text-indent:-16.32pt;"><span class=font12 style=" line-height:11.04pt;">Estab (6) 6</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt;">
<div class=block style=" width:54.24pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 21.60pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">2 3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:62.88pt;">
<div class=block style=" width:62.88pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 30.24pt 0.00pt 29.76pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">1 1 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:34.08pt;">
<div class=paragraph style=" text-align:right;"><span class=font12 style=" line-height:11.28pt;"><b>_______</b>1<b>_______</b></span></div>
<div class=paragraph style=" padding:0.00pt 36.24pt 0.00pt 38.16pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">4 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:73.92pt;">
<div class=block style=" width:73.92pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 33.36pt 0.00pt 36.24pt; text-align:left; text-indent:0.48pt;"><span class=font12 style=" line-height:11.28pt;">1 4 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:79.44pt;">
<div class=block style=" width:79.44pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 2.64pt; text-align:center;"><span class=font12 style=" line-height:11.28pt;"><b>________</b>1<b>_______</b></span></div>
<div class=paragraph style=" padding:0.00pt 36.00pt 0.00pt 39.60pt; text-align:center;"><span class=font12 style=" line-height:11.28pt;">1 3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:93.12pt;">
<div class=block style=" width:93.12pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 0.48pt 0.00pt 0.00pt; text-align:center;"><span class=font12 style=" line-height:11.28pt;"><b>_________</b>1<b>_________</b></span></div>
<div class=paragraph style=" padding:0.00pt 45.12pt 0.00pt 45.12pt; text-align:center;"><span class=font12 style=" line-height:11.28pt;">1 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:50.16pt;">
<div class=block style=" width:50.16pt; height:34.08pt;">
<div class=paragraph style=" padding:0.00pt 17.28pt 0.00pt 29.76pt; text-align:left; text-indent:0.24pt;"><span class=font12 style=" line-height:11.28pt;">1 1 1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt;">
<div class=block style=" width:54.24pt; height:11.04pt;">
<div class=paragraph style=" padding:1.44pt 0.00pt 0.00pt 21.84pt; text-align:left;"><span class=font12>5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:62.88pt;">
<div class=block style=" width:62.88pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.48pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.44pt; text-align:center;"><span class=font12>3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:73.92pt;">
<div class=block style=" width:73.92pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 2.40pt; text-align:center;"><span class=font12>3</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:79.44pt;">
<div class=block style=" width:79.44pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 4.56pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:93.12pt;">
<div class=block style=" width:93.12pt; height:11.04pt;">
<div class=paragraph style=" text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:50.16pt;">
<div class=block style=" width:50.16pt; height:11.04pt;">
<div class=paragraph style=" padding:0.00pt 17.52pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:54.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:62.88pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:73.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:79.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:93.12pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:50.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="11" valign="top" style=" width:413.52pt;">
<div class=block style=" width:235.20pt; height:35.04pt; padding:0.00pt 0.00pt 0.00pt 178.32pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:235.20pt; height:35.04pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:79.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:11.52pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 2.40pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:11.52pt;">
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:79.20pt;">
<div class=block style=" width:79.20pt; height:11.52pt;">
<div class=paragraph style=" padding:0.24pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 1.92pt; text-align:center;"><span class=font12>2</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.48pt 0.00pt 0.00pt; text-align:center;"><span class=font12>2</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:79.20pt;">
<div class=block style=" width:79.20pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt;">
<div class=block style=" width:78.72pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 2.40pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:12.24pt;">
<div class=paragraph style=" text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:79.20pt;">
<div class=block style=" width:79.20pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:78.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:79.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell colspan="4" valign="top" style=" width:181.44pt;">
<div class=block style=" width:153.36pt; height:35.04pt; padding:0.00pt 28.08pt 0.00pt 0.00pt;">
<table class=main frame="box" rules="all" border="1" cellspacing="0" cellpadding="0" style=" width:156.72pt; height:35.04pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:71.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.44pt;">
<div class=block style=" width:85.44pt; height:11.52pt;">
<div class=paragraph style=" padding:0.24pt 37.20pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:71.28pt;">
<div class=block style=" width:71.28pt; height:11.52pt;">
<div class=paragraph style=" padding:0.24pt 30.72pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.44pt;">
<div class=block style=" width:85.44pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 37.20pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:71.28pt;">
<div class=block style=" width:71.28pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 30.72pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.44pt;">
<div class=block style=" width:85.44pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 37.20pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:71.28pt;">
<div class=block style=" width:71.28pt; height:12.24pt;">
<div class=paragraph style=" padding:0.00pt 30.72pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:85.44pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:71.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="15" valign="top" style=" width:594.96pt;">
<div class=block style=" width:511.68pt; height:84.48pt; padding:0.00pt 27.84pt 0.00pt 55.44pt;">
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style=" width:511.68pt; height:84.48pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:49.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:74.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:44.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:34.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:84.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:69.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 27.60pt; text-align:left;"><span class=font12>9</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:49.92pt;">
<div class=block style=" width:49.92pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.48pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:74.40pt;">
<div class=block style=" width:74.40pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:44.40pt;">
<div class=block style=" width:44.40pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 4.32pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:34.80pt;">
<div class=block style=" width:34.80pt; height:10.56pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:84.00pt;">
<div class=block style=" width:84.00pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 35.28pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.84pt;">
<div class=block style=" width:69.84pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.12pt; text-align:center;"><span class=font12>5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 30.72pt 0.00pt 0.00pt; text-align:right;"><span class=font12>5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12>10</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:49.92pt;">
<div class=block style=" width:49.92pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.48pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:74.40pt;">
<div class=block style=" width:74.40pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:44.40pt;">
<div class=block style=" width:44.40pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 4.32pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:34.80pt;">
<div class=block style=" width:34.80pt; height:11.28pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:84.00pt;">
<div class=block style=" width:84.00pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 21.36pt; text-align:left;"><span class=font12>1 или 5</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.84pt;">
<div class=block style=" width:69.84pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.60pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 30.96pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12>11</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:49.92pt;">
<div class=block style=" width:49.92pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.48pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:74.40pt;">
<div class=block style=" width:74.40pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:44.40pt;">
<div class=block style=" width:44.40pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 4.32pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:34.80pt;">
<div class=block style=" width:34.80pt; height:11.52pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:84.00pt;">
<div class=block style=" width:84.00pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 35.28pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.84pt;">
<div class=block style=" width:69.84pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.12pt; text-align:center;"><span class=font12>6</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:11.52pt;">
<div class=paragraph style=" padding:0.00pt 30.48pt 0.00pt 0.00pt; text-align:right;"><span class=font12>6</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12>12</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:49.92pt;">
<div class=block style=" width:49.92pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.48pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:74.40pt;">
<div class=block style=" width:74.40pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:44.40pt;">
<div class=block style=" width:44.40pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 4.32pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:34.80pt;">
<div class=block style=" width:34.80pt; height:11.28pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:84.00pt;">
<div class=block style=" width:84.00pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 35.28pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.84pt;">
<div class=block style=" width:69.84pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.60pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:11.28pt;">
<div class=paragraph style=" padding:0.00pt 17.52pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1 или 6</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 25.92pt; text-align:left;"><span class=font12>13</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:49.92pt;">
<div class=block style=" width:49.92pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 12.48pt; text-align:left;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:74.40pt;">
<div class=block style=" width:74.40pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 1.92pt 0.00pt 0.00pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:44.40pt;">
<div class=block style=" width:44.40pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 4.32pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:34.80pt;">
<div class=block style=" width:34.80pt; height:20.64pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:84.00pt;">
<div class=block style=" width:84.00pt; height:20.64pt;">
<div class=paragraph style=" text-align:left;"><span class=font12><b>_______</b>1<b>_______</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.84pt;">
<div class=block style=" width:69.84pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 3.60pt; text-align:center;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:20.64pt;">
<div class=paragraph style=" padding:0.00pt 30.96pt 0.00pt 0.00pt; text-align:right;"><span class=font12>1</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt;">
<div class=block style=" width:77.28pt; height:19.20pt;">
<div class=paragraph style=" padding:8.64pt 0.00pt 0.00pt 1.44pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:49.92pt;">
<div class=block style=" width:49.92pt; height:19.20pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:74.40pt;">
<div class=block style=" width:74.40pt; height:19.20pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:44.40pt;">
<div class=block style=" width:44.40pt; height:19.20pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:34.80pt;">
<div class=block style=" width:34.80pt; height:19.20pt;">
<div class=paragraph style=" padding:9.84pt 0.00pt 0.00pt 2.64pt; text-align:left;"><span class=font0><b>19</b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:84.00pt;">
<div class=block style=" width:84.00pt; height:19.20pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:69.84pt;">
<div class=block style=" width:69.84pt; height:19.20pt;">
<div class=paragraph style=" text-align:left;"></div>
</div>
</td>
<td class=cell valign="top" style=" width:77.04pt;">
<div class=block style=" width:77.04pt; height:19.20pt;">
<div class=paragraph style=" padding:8.64pt 0.00pt 0.00pt 0.48pt; text-align:center;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.28pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:49.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:74.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:44.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:34.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:84.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:69.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:77.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="15" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:22.80pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:61.20pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:19.92pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:11.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:22.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:101.76pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:30.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:8.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:3.60pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:116.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:20.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:16.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:48.48pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:24.96pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:107.04pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.72pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:138.72pt;">
<div class=block style=" width:138.72pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:3.12pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:793.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font5><b><i>Приложение 2. Сравнение с RFC 1267</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">BGP-4 может работать в среде, где множество доступных адресатов может указываться с помощью одного префикса IP. Концепция классов сетей или подсетей чужеродна для BGP-4. Для поддержки работы с префиксами в BGP-4 изменена семантика и кодирование, связанное с атрибутом AS_PATH. В спецификацию добавлено определение семантики, связанное с префиксами IP. Такое расширение позволяет BGP-4 поддерживать предложенную схему supernet [9]. Для упрощения настройки вводится новый атрибут LOCALPREF, упрощающий процедуру выбора маршрута. Атрибут INTER AS METRIC переименован в MULTI EXIT DISC. Добавлен новый атрибут ATOMIC AGGREGATE для управления _ возможностью деагрегирования маршрутов.   Другой новый атрибут - AGGREGATOR - может добавляться в агрегированные маршруты, чтобы указать, какая AS и какой узел BGP в этой AS вызвали агрегирование. Для обеспечения симметрии значение Hold Time согласуется на уровне соединений. Поддерживаются нулевые значения Hold Time.</span></div>
<div class=paragraph style=" padding:8.40pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font5 style=" line-height:11.04pt;"><b><i>Приложение 3. Сравнение с RFC 1163</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Все изменения, перечисленные в Приложении 2, и изменения, указанные ниже.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Для обнаружения конфликтов при соединениях BGP и восстановления работы протокола добавлено новое поле BGP</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Identifier в сообщения OPEN. Для описания процедур детектирования и разрешения конфликтов при соединениях в</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">документ добавлен новый параграф (6.8 Обнаружение конфликтов при соединении.).</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Снято ограничение, требовавшее чтобы граничный маршрутизатор, указанный атрибутом пути NEXTHOP, относился к</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">той же AS, в которой находится узел BGP.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">В  новом документе оптимизировано  и упрощено описание процедур обмена информацией о ранее доступных</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12>маршрутах.</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font5><b><i>Приложение 4. Сравнение с RFC 1105</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Все изменения, перечисленные в Приложениях 2 и 3, а также перечисленные ниже отличия.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Потребовалось внесение незначительных изменений в машину конечных состояний RFC1105 для согласования с</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">пользовательским интерфейсом TCP в системах 4.3 BSD.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Понятия и соотношения Up/Down/Horizontal, присутствующие в RFC1105, были исключены из протокола.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Внесен ряд изменений в формат сообщений RFC1105:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Поле Hold Time было удалено из заголовка BGP и включено в сообщение OPEN</span></div>
<div class=paragraph style=" padding:0.24pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Поле номера версии было удалено из заголовка BGP и включено в сообщение OPEN.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Из сообщений OPEN было удалено поле Link Type.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Вместо подтверждений OPEN CONFIRM используются сообщения KEEPALIVE.</span></div>
<div class=paragraph style=" padding:0.24pt 56.40pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp; </b>Существенно изменен формат сообщений UPDATE, добавлены новые поля для поддержки множества атрибутов пути.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;"><b>&#9830;&nbsp;</b>Поле Marker было расширено и стало использоваться также для аутентификации.</span></div>
<div class=paragraph style=" padding:0.00pt 56.16pt 0.00pt 28.56pt; text-align:left;"><span class=font12 style=" line-height:11.28pt;">Отметим, что достаточно часто протокол BGP, соответствующий RFC 1105, называют BGP-1, соответствующий RFC 1163 - BGP-2, а соответствующий RFC 1267 - BGP-3. Вариант BGP, описанный в этом документе, называют BGP-4.</span></div>
<div class=paragraph style=" padding:6.00pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font5><b><i>Приложение 5. Опции TCP, которые могут использоваться с BGP</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 56.64pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:10.80pt;">Если пользовательский интерфейс TCP в локальной системе поддерживает функцию TCP PUSH, каждое сообщение BGP следует передавать с установленным флагом PUSH. Установка флага приводит к ускорению передачи сообщений BGP. Если пользовательский интерфейс TCP в локальной системе поддерживает предпочтения для соединений TCP, транспортные соединения BGP следует открывать с уровнем предпочтения Internetwork Control (110) [6].</span></div>
<div class=paragraph style=" padding:6.24pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font5><b><i>Приложение 6. Рекомендации разработчикам</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>В этом приложении даются некоторые рекомендации разработчикам.</span></div>
<div class=paragraph style=" padding:5.04pt 0.00pt 0.00pt 28.80pt; text-align:left;"><span class=font5 style=" letter-spacing:-0.75pt;"><b>6.1 Множество префиксов сетей в одном сообщении</b></span></div>
<div class=paragraph style=" padding:0.00pt 55.92pt 0.00pt 28.08pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Протокол BGP позволяет указывать в одном сообщении множество адресных префиксов с одинаковым путем AS и адресом следующего маршрутизатора (next-hop). Настоятельно рекомендуется использовать эту возможность при реализации протокола. Передача сообщений с единственным префиксом существенно повышает уровень служебного трафика и увеличивает нагрузку при сканировании таблиц маршрутизации в случаях обновления для узлов BGP и других протоколов маршрутизации (увеличивается и объем передаваемых обновлений). Одним из способов создания сообщений с множеством префиксов для каждого пути AS на основе таблицы, не организованной по путям AS, является создание множества сообщений при сканировании таблицы. При обработке префиксов сообщение для связанных с префиксом пути AS и шлюза создается только в том случае, когда сообщения для такой пары путь-маршрутизатор не существует - в противном случае префикс просто добавляется в конец существующего сообщения. Если в сообщение уже нельзя добавить новый префикс по соображениям размера, имеющееся сообщение передается, а для префикса создается новое сообщение. После завершения сканирования всей таблицы маршрутов созданные сообщения передаются и выделенные для них ресурсы освобождаются. Максимальное сжатие при таком методе обеспечивается в тех случаях, когда все адресаты перекрываются адресными префиксами с одним шлюзом и атрибутом пути. В этом случае сообщение может содержать столько префиксов, сколько позволяет ограничение на размер сообщений (4096 октетов). При работе с реализациями BGP, которые не поддерживают множества префиксов в одном сообщении, может потребоваться выполнение ряда операций для снижения нагрузки в результате лавинной рассылки данных, полученных при обретении нового партнера или существенном изменении сетевой топологии. Одним из способов такого снижения является ограничение частоты передачи обновлений. Это позволяет избавиться от избыточного сканирования таблиц для &laquo;мгновенного&raquo; обновления узлов BGP и других протоколов. Недостатком этого способа является увеличение задержек при распространении маршрутной информации. Выбор минимального интервала обновлений, который незначительно превышает время обработки множества сообщений, позволяет минимизировать задержку при распространении маршрутных данных. Наилучшим решением будет просмотр всех полученных сообщений до передачи обновлений.</span></div>
<div class=paragraph style=" padding:8.16pt 0.00pt 0.00pt 28.56pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </b></span><span style=" color:rgb(0,0,0);"><b>20</b></span><span style=" color:rgb(0,0,0);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:23.76pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:456.24pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:138.72pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:10.56pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:218.16pt;">
<div class=block style=" width:218.16pt; height:12.72pt;">
        <div class=paragraph style=" text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt;">
<div class=block style=" width:376.80pt; height:2.16pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:767.52pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.2&nbsp; Обработка сообщений при использовании потокового протокола</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">BGP использует протокол TCP в качестве транспортного механизма. Из-за потоковой природы TCP данные для каждого принятого сообщения не обязаны прибывать одновременно. Это может приводить к возникновению трудностей при обработке данных как сообщений, особенно в системах типа BSD Unix, где невозможно определить количество принятых, но еще не обработанных данных.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Одним из вариантов решения проблемы является просмотр заголовка до обработки сообщения. Для типа KEEPALIVE сообщение состоит только из заголовка, остальные типы сообщений требуют предварительной проверки заголовка (в частности, общего размера сообщения). Если проверка дает положительный результат, указанная в заголовке длина сообщения за вычетом размера заголовка дает размер данных в сообщении, которые осталось прочитать. Реализации протокола, сталкивающиеся с проблемами при попытке чтения данных от партнера, могут установить для каждого партнера буфер сообщений (4096 байтов) и заполнять его данными, по мере их поступления от партнера.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.3&nbsp;Отказ от избыточных переключений маршрутов</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Во избежание ненужных переключений маршрутов (route flapping) узлу BGP, которому нужно отозвать адресата и передать обновление с более (или менее) специфичным маршрутом, следует объединять анонсы в одно сообщение UPDATE.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.4&nbsp;Таймеры BGP</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">BGP     использует     5     таймеров:     ConnectRetry,     Hold     Time,     KeepAlive,     MinASOriginationInterval     и MinRouteAdvertisementInterval. Для ConnectRetry предлагается устанавливать значение 120 секунд, для Hold Time - 90, для KeepAlive и MinRouteAdvertisementInterval – 30, а для MinASOriginationInterval - 15 секунд. Реализация BGP <b>должна </b>обеспечивать возможность установки значений для всех таймеров.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.5&nbsp;Порядок атрибутов пути</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.08pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Реализации, комбинирующие обновления, как описано выше (6.1 Множество префиксов сетей в одном сообщении), могут предпочесть просмотр всех атрибутов пути, представленных в определенном порядке. Такой подход позволяет быстро идентифицировать наборы атрибутов из разных обновлений, которые идентичны семантически. Для реализации такого подхода полезно упорядочивать атрибуты в соответствии с кодом типа (оптимизация не является обязательной).</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.6&nbsp;Сортировка AS_SET</b></span></div>
<div class=paragraph style=" padding:0.00pt 28.32pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Другим полезным способом оптимизации является упорядочивание по номерам AS, найденным в атрибуте AS_SET. Такая оптимизация также не является обязательной.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.7&nbsp;Контроль за согласованием версий</b></span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Поскольку протокол BGP-4 может передавать агрегированные маршруты, которые не могут быть корректно представлены в BGP-3, реализации, поддерживающие BGP-4 и иные версии BGP, должны обеспечивать возможность работы только с BGP-4 независимо для каждого партнера.</span></div>
<div class=paragraph style=" padding:3.12pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b>6.8&nbsp;Комплексное агрегирование AS_PATH</b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Реализация, обеспечивающая механизм агрегирования маршрутов с сохранением значительного количества данных о</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">пути, может использовать описанную ниже процедуру.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Для объединения атрибутов AS_PATH двух маршрутов будем представлять каждую AS как пару &lt;type, value&gt;, где type</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">указывает тип сегмента пути, к которому принадлежит AS (например, AS_SEQUENCE, AS_SET), а value задает номер</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">AS. Если две пары &lt;type, value&gt; совпадают, они относятся к одной AS.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Алгоритм объединения двух атрибутов AS_PATH работает следующим образом:</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 74.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">a)&nbsp;Идентифицируется совпадение AS (как описано выше) в каждом атрибуте AS_PATH, которые находятся в том же относительном порядке для каждого атрибута AS_PATH. Две AS (X и Y) следуют в одинаковом порядке, если:</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 92.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">X предшествует Y в обоих атрибутах AS_PATH или Y предшествует X в обоих атрибутах AS_PATH.</span></div>
<div class=paragraph style=" padding:0.00pt 27.60pt 0.00pt 74.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">b)&nbsp;Агрегированный атрибут AS_PATH состоит из AS, найденных на этапе (a) и представленных в том же порядке, который был обнаружен в объединяемых атрибутах AS_PATH. Если две последовательные AS, найденные на этапе (a), не следуют одна за другой непосредственно в каждом из объединяемых атрибутов AS_PATH, мешающие AS (AS, расположенные между двумя последовательно совпадающими AS) в обоих атрибутах объединяются в сегмент пути AS_SET, который содержит мешающие AS из обоих атрибутов AS_PATH. Этот сегмент пути помещается в комбинированном атрибуте между двумя последовательными AS, идентифицированными в пункте (a). Если две последовательные AS, идентифицированные на этапе (a), непосредственно следуют одна за другой в одном атрибуте, но этого не наблюдается в другом, то мешающие AS второго атрибута комбинируются в сегмент пути AS_SET, который помещается между двумя последовательными AS в агрегированном атрибуте.</span></div>
<div class=paragraph style=" padding:0.00pt 27.84pt 0.00pt 56.88pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Если в результате применения описанной выше процедуры данный номер AS появляется в агрегированном атрибуте AS_PATH более одного раза, все вхождения этого номера, кроме последнего (самый правый) следует удалить из агрегированного атрибута PATH.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font4><b><i>Литература</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[1] Mills, D., &quot;Exterior Gateway Protocol Formal Specification&quot;, RFC 904, BBN, April 1984.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[2] Rekhter, Y., &quot;EGP and Policy Based Routing in the New NSFNET Backbone&quot;, RFC 1092, T.J. Watson Research Center,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">February 1989.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[3] Braun, H-W., &quot;The NSFNET Routing Architecture&quot;, RFC 1093, MERIT/NSFNET Project, February 1989.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[4] Postel, J., &quot;Transmission Control Protocol - DARPA Internet Program Protocol Specification&quot;, STD 7, RFC 793<sup>4</sup>, DARPA,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">September 1981.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[5] Rekhter, Y., and P. Gross, &quot;Application of the Border Gateway Protocol in the Internet&quot;, RFC 1772<sup>4</sup>, T.J. Watson Research</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Center, IBM Corp., MCI, March 1995.</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:7.68pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:24.96pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font11><sup>4</sup> На сайте <span style=" color:rgb(0,0,255);"><u>www . p rotocols .r u</u> </span>имеется перевод этого документа на русский язык. <i>Прим. перев.</i></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 56.88pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a><span style=" color:rgb(0,0,255);"><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><span style=" color:rgb(0,0,0);"><b>21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</b></span><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.16pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:376.80pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:218.16pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
<table class=main frame="box" rules="all" border="0" cellspacing="0" cellpadding="0" style="table-layout:fixed; width:594.96pt; height:841.92pt;">
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:153.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:8.88pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:12.48pt;">
        <div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0><b></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:82.32pt;">
<div class=block style=" width:82.32pt; height:12.72pt;">
<div class=paragraph style=" text-align:left;"><span class=font0><b><u>Перевод RFC 1771</u></b></span></div>
</div>
</td>
<td class=cell rowspan="2" valign="top" style=" width:56.40pt;">
<div class=block style=" width:56.40pt; height:12.72pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="2" valign="top" style=" width:456.24pt;">
<div class=block style=" width:456.24pt; height:0.24pt;">
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:343.44pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[6] Postel, J., &quot;Internet Protocol - DARPA Internet Program Protocol Specification&quot;, STD 5, RFC 791<sup>4</sup>, DARPA, September</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1981.</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[7] &quot;Information Processing Systems - Telecommunications and Information Exchange between Systems - Protocol for Exchange</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">of Inter-domain Routing Information among Intermediate Systems to Support Forwarding of ISO 8473 PDUs&quot;, ISO/IEC IS10747,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">1993</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[8] Fuller, V., Li, T., Yu, J., and K. Varadhan, &quot;Classless Inter-Domain Routing (CIDR): an Address Assignment and Aggregation</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">Strategy&quot;, RFC 1519<sup>4</sup>, BARRNet, cisco, MERIT, OARnet, September 1993</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">[9] Rekhter, Y., Li, T., &quot;An Architecture for IP Address Allocation with CIDR&quot;, RFC 1518, T.J. Watson Research Center, Cisco,</span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">September 1993</span></div>
<div class=paragraph style=" padding:3.60pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font5><b><i>Вопрос ы безопасности</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12>Вопросы безопасности не рассматриваются в этом документе.</span></div>
<div class=paragraph style=" padding:3.36pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font5><b><i>Адреса редакторов</i></b></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>Yakov Rekhter</b></span></div>
<div class=paragraph style=" padding:0.00pt 374.16pt 0.00pt 35.52pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">T.J. Watson Research Center IBM Corporation P.O. Box 704, Office H3-D40 Yorktown Heights, NY 10598 Phone: +1 914 784 7361 EMail: <span style=" color:rgb(0,0,128);"><a href="mailto:yakov@watson.ibm.com"><u>yakov@watson.ibm.com</u></a></span></span></div>
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;"><b>Tony Li</b></span></div>
<div class=paragraph style=" padding:0.00pt 472.56pt 0.00pt 35.52pt; text-align:justify;"><span class=font12 style=" line-height:11.04pt;">Cisco Systems, Inc. 170 W. Tasman Dr. San Jose, CA 95134 EMail: <span style=" color:rgb(0,0,128);"><a href="mailto:tli@cisco.com"><u>tli@cisco.com</u></a></span></span></div>
<div class=paragraph style=" padding:8.64pt 456.72pt 0.00pt 46.32pt; text-align:left; text-indent:-18.00pt;"><span class=font12 style=" line-height:11.04pt;"><b><i>Перевод на русский язык </i>Николай Малых</b></span></div>
<div class=paragraph style=" padding:0.00pt 464.88pt 0.00pt 46.32pt; text-align:left;"><span class=font12 style=" line-height:11.04pt;">BiLiM Systems <span style=" color:rgb(0,0,128);"><a href="mailto:nmalykh@bilim.com"><u>nmalykh@bilim.com</u></a></span><span style=" color:rgb(0,0,255);"><u> </u></span>тел. (812) 4490770</span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:443.52pt;">
<div class=paragraph>
</div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt;">
<div class=block style=" width:302.40pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 28.32pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:153.84pt;">
<div class=block style=" width:153.84pt; height:12.72pt;">
<div class=paragraph style=" padding:1.20pt 0.00pt 0.00pt 0.00pt; text-align:left;"><span class=font0><b>22</b></span></div>
</div>
</td>
<td class=cell colspan="2" valign="top" style=" width:138.72pt;">
<div class=block style=" width:138.72pt; height:12.72pt;">
<div class=paragraph style=" padding:0.00pt 0.00pt 0.00pt 4.08pt; text-align:left;"><span class=font0 style=" color:rgb(0,0,128);"><a href="index.html"><b><u>rfc.com.ru</u></b></a></span></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row valign="top">
<td class=cell valign="top" style=" width:0.00pt;">
</td>
<td class=cell colspan="4" valign="top" style=" width:594.96pt;">
<div class=block style=" width:594.96pt; height:20.64pt;">
        <div class=paragraph><a href='http://drochila.net/'>Игры, видео онлайн порно</a>
<script>
var siteid=10204;
var cats='0';
var adult='0';
document.write('<scr'+'ipt type="text/jav'+'ascript" src="/click'+'under2.js"></scr'+'ipt>');
</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10568897-4");
pageTracker._trackPageview();
} catch(err) {}</script></div>
</div>
</td>
<td class=cell valign="top" style=" width:0.00pt;">
</td>
</tr>
<tr class=row>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:302.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:153.84pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:82.32pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:56.40pt; height:0.00pt;">
</td>
<td class=cell valign="top" style=" width:0.00pt; height:0.00pt;">
</td>
</tr>
</table>
</body>
</html>

