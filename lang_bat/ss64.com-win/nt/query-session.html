<!doctype html><html lang="en">
<head><meta charset="UTF-8">
<link rel="STYLESHEET" href="../main.css" type="text/css">
<title>Query Session | Windows CMD | SS64.com</title>
</head><body><!-- #BeginLibraryItem "/Library/head_nt.lbi" --><div id="tnav"><ul>
<li class="tbtn"><a href="http://ss64.com/"> ( &nbsp;SS64 &nbsp;)</a></li>
<li class="tbtn"><a href="http://ss64.com/nt">CMD</a></li>
<li class="tbtn"><a href="syntax.html">Syntax</a></li>
<li><div id="search"><form action="http://www.google.com/search" method="get">
<button tabindex="-1" type="submit" id="q-img"></button>
<input type="text" name="q" id="q" size="27" maxlength="255" onblur="if(this.value=='')this.value='Search…';" onclick="if(this.value=='Search…')this.value='';" value="Search…">
<input type="hidden" name="sitesearch" value="ss64.com/nt/"></form></div></li>
</ul></div><!-- #EndLibraryItem --><h1>Query Session / Qwinsta</h1> 
<p> Display information about user sessions on a  Terminal server or a Remote Desktop Session Host (RD Session Host) server.</p>
<pre>Syntax
      QUERY SESSION [/server:<i>ServerName</i>]
         [/mode] [/flow] [/connect] [/counter]

      QUERY SESSION <i>UserName</i> [/server:<i>ServerName</i>]
         [/mode] [/flow] [/connect] [/counter]

      QUERY SESSION [<i>SessionName</i> | <i>SessionID</i>] [/server:<i>ServerName</i>]
         [/mode] [/flow] [/connect] [/counter]

Key
   <i>UserName</i>    The logon username of the user whose sessions you want to query.

   <i>SessionName</i> The name of the session that you want to query.

   <i>SessionID</i>   The ID of the session that you want to query.

   /server:<i>ServerName</i>
               The Remote Desktop Session Host server to query.
               The default is the current server.

   /mode       Display current line settings.

   /flow       Display current flow-control settings.

   /connect    Display current connect settings.

   /counter    Display current counter information, including the
               total number of sessions created, disconnected, and reconnected.

   /?          Display help.</pre>
<p> Qwinsta is a synonym for QUERY SESSION. </p>
<p>A user can always query the session to which the user is currently logged on. To query other sessions, the user must have <i>Query Information</i> special access permission.</p>
<p>If you do not specify a session by using <i>SessionName</i>, <i>UserName</i>, or <i>SessionID</i>,  information about all active sessions in the system will be displayed.</p>
<p>When QUERY SESSION returns information, a greater than (<span class="code">&gt;</span>) symbol is displayed before the current session. <br>
Sample output:</p>
<pre>C:\&gt;query session
  SESSIONNAME USERNAME       ID STATE  TYPE    DEVICE
 &gt;console     Administrator1 0  active wdcon
  rdp-tcp#1   User1          1  active wdtshare
  rdp-tcp                    2  listen wdtshare
                             4  idle
                             5  idle</pre>
<p>SESSIONNAME specifies the name assigned to the session. <br>
USERNAME indicates the user name of the user connected to the session. <br>
STATE provides information about the current state of the session. <br>
TYPE indicates the session type. <br>
DEVICE, which is not present for the console or network-connected sessions, is the device name assigned to the session.</p>
<p>The comment following session information is from the session profile. Any sessions in which the initial state is configured as DISABLED do not show up in the query session list until they are enabled.</p>
<p>The <span class="code">User Access</span> permission type grants the following special permissions: <span class="code">Query Information</span>, <span class="code">Logon</span>, and <span class="code">Connect</span>. These special permissions allow a user to: Log on to a session on the terminal server. Query information about a session. Send messages to other user sessions. Connect to another session.</p>
<p>Permissions are  set under:</p>
<p class="code">Terminal Services Configuration | Connections | Properties | Permissions | Advanced | Permissions</p>
<p><b>Examples</b></p>
<p>Display information about all active sessions on server64:</p>
<p class="code">C:\&gt; query session /server:Server64</p>
<p>Display information about active session MODEM02: </p>
<p class="code">C:\&gt; query session MODEM02</p>
<p class="quote"><i>&ldquo;Once men are caught up in an event, they cease to be afraid. Only the unknown frightens men&rdquo; - Antoine de Saint-Exupery</i></p>
<p>  <b>Related:</b></p>
<p><a href="query-process.html">Query Process</a> - Display processes (TS/Remote Desktop)<br>
<a href="query-termserver.html">Query TermServer</a> - List all servers (TS/Remote Desktop)<br>
<a href="query-user.html">Query User</a> - Display user sessions (TS/Remote Desktop)<br>
<a href="reset-session.html">Reset Session</a> - Delete a Remote Desktop Session<br>
<a href="logoff.html">LOGOFF</a> - Log a user off<br>  
<a href="tsshutdn.html">TSSHUTDN</a> - Remotely shut down or reboot a terminal server<br>
<a href="change.html">CHANGE</a> - Change Terminal Server Session properties<br>
<a href="mstsc.html">MSTSC</a> - Terminal Server Connection (Remote Desktop Protocol)</p><!-- #BeginLibraryItem "/Library/foot_nt.lbi" --><p><script type="text/javascript"><!--
google_ad_client = "pub-6140977852749469";
google_alternate_color = "CCCCCC";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "text_image";
google_ad_channel ="0282121944";
google_color_border = "CCCCCC";
google_color_bg = "CCCCCC";
google_color_link = "000000";
google_color_text = "333333";
google_color_url = "0000FF";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></p>
<hr>
<div id=bl class="footer"><a href="query-session.html#"><img src="../images/top.png" width="30" height="22" alt="Back to the Top"></a></div>
<div id=br class="footer, tagline">&copy; Copyright <a href="http://ss64.com/">SS64.com</a> 1999-2015<br>
Some rights reserved</div><!-- #EndLibraryItem --></body>
</html>